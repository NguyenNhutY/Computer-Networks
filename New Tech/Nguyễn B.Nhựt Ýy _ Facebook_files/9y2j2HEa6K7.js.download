;/*FB_PKG_DELIM*/

__d("CometMessengerShareGating",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("495")===!0}g.shouldEnableBCFSingleFetchXMA=a}),98);
__d("LexicalLinkPlugin",["cr:2067"],(function(a,b,c,d,e,f){e.exports=b("cr:2067")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @generated
 * @noflow
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalLinkPlugin.prod",["Lexical","LexicalComposerContext","LexicalLink","LexicalUtils","react"],(function $module_LexicalLinkPlugin_prod(global,require,requireDynamic,requireLazy,module,exports){

'use strict';var _require_closure_react;var n=_require_closure_react||(_require_closure_react=require("react"));
exports.LinkPlugin=function(_ref){var d=_ref.validateUrl,g=_ref.attributes;var _c$useLexicalComposer=require("LexicalComposerContext").useLexicalComposerContext(),e=_c$useLexicalComposer[0];n.useEffect(function(){if(!e.hasNodes([require("LexicalLink").LinkNode]))throw Error("LinkPlugin: LinkNode not registered on editor");return require("LexicalUtils").mergeRegister(e.registerCommand(require("LexicalLink").TOGGLE_LINK_COMMAND,function(a){if(null===a)return require("LexicalLink").$toggleLink(a),!0;if("string"===typeof a)return void 0===d||d(a)?(require("LexicalLink").$toggleLink(a,g),!0):!1;var f=a.url,h=a.target,k=a.rel,p=a.title;require("LexicalLink").$toggleLink(f,babelHelpers["extends"]({},g,{rel:k,target:h,title:p}));return!0;},require("Lexical").COMMAND_PRIORITY_LOW),
void 0!==d?e.registerCommand(require("Lexical").PASTE_COMMAND,function(a){var f=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(f)||f.isCollapsed()||!require("LexicalUtils").objectKlassEquals(a,ClipboardEvent)||null===a.clipboardData)return!1;var h=a.clipboardData.getData("text");return d(h)?f.getNodes().some(function(k){return require("Lexical").$isElementNode(k);})?!1:(e.dispatchCommand(require("LexicalLink").TOGGLE_LINK_COMMAND,babelHelpers["extends"]({},g,{url:h})),a.preventDefault(),!0):!1;},require("Lexical").COMMAND_PRIORITY_LOW):function(){});},[e,d,g]);return null;};}),null);
__d("LexicalTable",["cr:1950"],(function(a,b,c,d,e,f){e.exports=b("cr:1950")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @generated
 * @noflow
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalTable.prod",["Lexical","LexicalClipboard","LexicalUtils"],(function $module_LexicalTable_prod(global,require,requireDynamic,requireLazy,module,exports){

'use strict';var ba=/^(\d+(?:\.\d+)?)px$/,x={BOTH:3,COLUMN:2,NO_STATUS:0,ROW:1};var
y=function(_w$ElementNode){babelHelpers.inheritsLoose(y,_w$ElementNode);y.getType=function getType(){return"tablecell";};y.clone=function clone(a){return new y(a.__headerState,a.__colSpan,a.__width,a.__key);};var _proto=y.prototype;_proto.afterCloneFrom=function afterCloneFrom(a){_w$ElementNode.prototype.afterCloneFrom.call(this,a);this.__rowSpan=a.__rowSpan;this.__backgroundColor=a.__backgroundColor;};y.importDOM=function importDOM(){return{td:function td(){return{conversion:ca,priority:0};},th:function th(){return{conversion:ca,priority:0};}};};y.importJSON=function importJSON(a){var b=a.rowSpan||1;return B(a.headerState,a.colSpan||1,a.width||void 0).setRowSpan(b).setBackgroundColor(a.backgroundColor||null);};function y(a,
b,c,d){var _this;if(a===void 0){a=x.NO_STATUS;}if(b===void 0){b=1;}_this=_w$ElementNode.call(this,d)||this;_this.__colSpan=b;_this.__rowSpan=1;_this.__headerState=a;_this.__width=c;_this.__backgroundColor=null;return _this;}_proto.createDOM=function createDOM(a){var b=document.createElement(this.getTag());this.__width&&(b.style.width=this.__width+"px");1<this.__colSpan&&(b.colSpan=this.__colSpan);1<this.__rowSpan&&(b.rowSpan=this.__rowSpan);null!==this.__backgroundColor&&(b.style.backgroundColor=this.__backgroundColor);require("LexicalUtils").addClassNamesToElement(b,a.theme.tableCell,this.hasHeader()&&a.theme.tableCellHeader);return b;};_proto.exportDOM=function exportDOM(a){var _w$ElementNode$protot=_w$ElementNode.prototype.
exportDOM.call(this,a);a=_w$ElementNode$protot.element;if(a){a.style.border="1px solid black";1<this.__colSpan&&(a.colSpan=this.__colSpan);1<this.__rowSpan&&(a.rowSpan=this.__rowSpan);a.style.width=(this.getWidth()||75)+"px";a.style.verticalAlign="top";a.style.textAlign="start";var b=this.getBackgroundColor();null!==b?a.style.backgroundColor=b:this.hasHeader()&&(a.style.backgroundColor="#f2f3f5");}return{element:a};};_proto.exportJSON=function exportJSON(){return babelHelpers["extends"]({},_w$ElementNode.prototype.exportJSON.call(this),{backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,
rowSpan:this.__rowSpan,type:"tablecell",width:this.getWidth()});};_proto.getColSpan=function getColSpan(){return this.getLatest().__colSpan;};_proto.setColSpan=function setColSpan(a){var b=this.getWritable();b.__colSpan=a;return b;};_proto.getRowSpan=function getRowSpan(){return this.getLatest().__rowSpan;};_proto.setRowSpan=function setRowSpan(a){var b=this.getWritable();b.__rowSpan=a;return b;};_proto.getTag=function getTag(){return this.hasHeader()?"th":"td";};_proto.setHeaderStyles=function setHeaderStyles(a,b){if(b===void 0){b=x.BOTH;}var c=this.getWritable();c.__headerState=a&b|c.__headerState&~b;return c;};_proto.getHeaderStyles=function getHeaderStyles(){return this.getLatest().__headerState;};_proto.setWidth=function setWidth(a){var b=this.getWritable();
b.__width=a;return b;};_proto.getWidth=function getWidth(){return this.getLatest().__width;};_proto.getBackgroundColor=function getBackgroundColor(){return this.getLatest().__backgroundColor;};_proto.setBackgroundColor=function setBackgroundColor(a){var b=this.getWritable();b.__backgroundColor=a;return b;};_proto.toggleHeaderStyle=function toggleHeaderStyle(a){var b=this.getWritable();b.__headerState=(b.__headerState&a)===a?b.__headerState-a:b.__headerState+a;return b;};_proto.hasHeaderState=function hasHeaderState(a){return(this.getHeaderStyles()&a)===a;};_proto.hasHeader=function hasHeader(){return this.getLatest().__headerState!==x.NO_STATUS;};_proto.updateDOM=function updateDOM(a){return a.__headerState!==this.__headerState||
a.__width!==this.__width||a.__colSpan!==this.__colSpan||a.__rowSpan!==this.__rowSpan||a.__backgroundColor!==this.__backgroundColor;};_proto.isShadowRoot=function isShadowRoot(){return!0;};_proto.collapseAtStart=function collapseAtStart(){return!0;};_proto.canBeEmpty=function canBeEmpty(){return!1;};_proto.canIndent=function canIndent(){return!1;};return y;}(require("Lexical").ElementNode);
function ca(a){var b=a.nodeName.toLowerCase(),c=void 0;ba.test(a.style.width)&&(c=parseFloat(a.style.width));b=B("th"===b?x.ROW:x.NO_STATUS,a.colSpan,c);b.__rowSpan=a.rowSpan;c=a.style.backgroundColor;""!==c&&(b.__backgroundColor=c);a=a.style;c=(a&&a.textDecoration||"").split(" ");var d="700"===a.fontWeight||"bold"===a.fontWeight,e=c.includes("line-through"),f="italic"===a.fontStyle,g=c.includes("underline");return{after:function after(n){0===n.length&&n.push(require("Lexical").$createParagraphNode());return n;},forChild:function forChild(n,p)
{if(C(p)&&!require("Lexical").$isElementNode(n)){p=require("Lexical").$createParagraphNode();if(require("Lexical").$isLineBreakNode(n)&&"\n"===n.getTextContent())return null;require("Lexical").$isTextNode(n)&&(d&&n.toggleFormat("bold"),e&&n.toggleFormat("strikethrough"),f&&n.toggleFormat("italic"),g&&n.toggleFormat("underline"));p.append(n);return p;}return n;},node:b};}function B(a,b,c){if(b===void 0){b=1;}return require("Lexical").$applyNodeReplacement(new y(a,b,c));}function C(a){return a instanceof y;}var da=require("Lexical").createCommand("INSERT_TABLE_COMMAND");var D;
function F(a){var b=new URLSearchParams();b.append("code",a);for(var c=1;c<arguments.length;c++){b.append("v",arguments[c]);}throw Error("Minified Lexical error #"+a+"; visit https://lexical.dev/docs/error?"+b+" for the full message or "+"use the non-minified dev environment for full errors and additional helpful warnings.");}D=F&&F.__esModule&&Object.prototype.hasOwnProperty.call(F,"default")?F["default"]:F;var ea="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;var
I=function(_w$ElementNode2){babelHelpers.inheritsLoose(I,_w$ElementNode2);I.getType=function getType(){return"tablerow";};I.clone=function clone(a){return new I(a.__height,a.__key);};I.importDOM=function importDOM(){return{tr:function tr(){return{conversion:fa,priority:0};}};};I.importJSON=function importJSON(a){return J(a.height);};function I(a,b){var _this2;_this2=_w$ElementNode2.call(this,b)||this;_this2.__height=a;return _this2;}var _proto2=I.prototype;_proto2.exportJSON=function exportJSON(){return babelHelpers["extends"]({},_w$ElementNode2.prototype.exportJSON.call(this),this.getHeight()&&{height:this.getHeight()},{type:"tablerow",version:1});};_proto2.createDOM=function createDOM(a){var b=document.createElement("tr");this.__height&&(b.style.height=this.__height+"px");require("LexicalUtils").addClassNamesToElement(b,
a.theme.tableRow);return b;};_proto2.isShadowRoot=function isShadowRoot(){return!0;};_proto2.setHeight=function setHeight(a){this.getWritable().__height=a;return this.__height;};_proto2.getHeight=function getHeight(){return this.getLatest().__height;};_proto2.updateDOM=function updateDOM(a){return a.__height!==this.__height;};_proto2.canBeEmpty=function canBeEmpty(){return!1;};_proto2.canIndent=function canIndent(){return!1;};return I;}(require("Lexical").ElementNode);function fa(a){var b=void 0;ba.test(a.style.height)&&(b=parseFloat(a.style.height));return{node:J(b)};}function J(a){return require("Lexical").$applyNodeReplacement(new I(a));}function K(a){return a instanceof I;}
function ha(a){a=require("LexicalUtils").$findMatchingParent(a,function(b){return K(b);});if(K(a))return a;throw Error("Expected table cell to be inside of table row.");}function ia(a){a=require("LexicalUtils").$findMatchingParent(a,function(b){return M(b);});if(M(a))return a;throw Error("Expected table cell to be inside of table.");}function ja(a,b){var c=ia(a),_c$getCordsFromCellNo=c.getCordsFromCellNode(a,b),d=_c$getCordsFromCellNo.x,e=_c$getCordsFromCellNo.y;return{above:c.getCellNodeFromCords(d,e-1,b),below:c.getCellNodeFromCords(d,e+1,b),left:c.getCellNodeFromCords(d-1,e,b),right:c.getCellNodeFromCords(d+1,e,b)};}
var ka=function ka(a,b){return a===x.BOTH||a===b?b:x.NO_STATUS;};function N(a){var b=a.getFirstDescendant();null==b?a.selectStart():b.getParentOrThrow().selectStart();}function la(a,b){var c=a.getFirstChild();null!==c?c.insertBefore(b):a.append(b);}function O(a,b,c){var _ma=ma(a,b,c),d=_ma[0],e=_ma[1],f=_ma[2];null===e&&D(207);null===f&&D(208);return[d,e,f];}
function ma(a,b,c){function d(p){var t=e[p];void 0===t&&(e[p]=t=[]);return t;}var e=[],f=null,g=null;a=a.getChildren();for(var p=0;p<a.length;p++){var n=a[p];K(n)||D(209);for(var t=n.getFirstChild(),v=0;null!=t;t=t.getNextSibling()){C(t)||D(147);for(n=d(p);void 0!==n[v];){v++;}n={cell:t,startColumn:v,startRow:p};var _t=t,k=_t.__rowSpan,l=_t.__colSpan;for(var m=0;m<k&&!(p+m>=a.length);m++){var r=d(p+m);for(var q=0;q<l;q++){r[v+q]=n;}}null!==b&&null===f&&b.is(t)&&(f=n);null!==c&&null===g&&c.is(t)&&(g=n);}}return[e,
f,g];}function P(a){a instanceof y||("__type"in a?(a=require("LexicalUtils").$findMatchingParent(a,C),C(a)||D(148)):(a=require("LexicalUtils").$findMatchingParent(a.getNode(),C),C(a)||D(148)));var b=a.getParent();K(b)||D(149);var c=b.getParent();M(c)||D(210);return[a,b,c];}
function na(a){var _P=P(a),b=_P[0],c=_P[2];a=c.getChildren();var d=a.length;var e=a[0].getChildren().length;var f=Array(d);for(var g=0;g<d;g++){f[g]=Array(e);}for(e=0;e<d;e++){g=a[e].getChildren();var n=0;for(var p=0;p<g.length;p++){for(;f[e][n];){n++;}var t=g[p],v=t.__rowSpan||1,k=t.__colSpan||1;for(var l=0;l<v;l++){for(var m=0;m<k;m++){f[e+l][n+m]=t;}}if(b===t)return{colSpan:k,columnIndex:n,rowIndex:e,rowSpan:v};n+=k;}}return null;}var
pa=function(){function pa(a,b,c){this.anchor=b;this.focus=c;b._selection=this;c._selection=this;this._cachedNodes=null;this.dirty=!1;this.tableKey=a;}var _proto3=pa.prototype;_proto3.getStartEndPoints=function getStartEndPoints(){return[this.anchor,this.focus];};_proto3.isBackward=function isBackward(){return this.focus.isBefore(this.anchor);};_proto3.getCachedNodes=function getCachedNodes(){return this._cachedNodes;};_proto3.setCachedNodes=function setCachedNodes(a){this._cachedNodes=a;};_proto3.is=function is(a){return Q(a)?this.tableKey===a.tableKey&&this.anchor.is(a.anchor)&&this.focus.is(a.focus):!1;};_proto3.set=function set(a,b,c){this.dirty=!0;this.tableKey=a;this.anchor.key=b;this.focus.key=c;
this._cachedNodes=null;};_proto3.clone=function clone(){return new pa(this.tableKey,this.anchor,this.focus);};_proto3.isCollapsed=function isCollapsed(){return!1;};_proto3.extract=function extract(){return this.getNodes();};_proto3.insertRawText=function insertRawText(){};_proto3.insertText=function insertText(){};_proto3.hasFormat=function hasFormat(a){var b=0;this.getNodes().filter(C).forEach(function(c){c=c.getFirstChild();require("Lexical").$isParagraphNode(c)&&(b|=c.getTextFormat());});return 0!==(b&require("Lexical").TEXT_TYPE_TO_FORMAT[a]);};_proto3.insertNodes=function insertNodes(a){var b=this.focus.getNode();require("Lexical").$isElementNode(b)||D(151);require("Lexical").$normalizeSelection__EXPERIMENTAL(b.select(0,b.getChildrenSize())).insertNodes(a);};_proto3.getShape=function getShape(){var a=
require("Lexical").$getNodeByKey(this.anchor.key);C(a)||D(152);a=na(a);null===a&&D(153);var b=require("Lexical").$getNodeByKey(this.focus.key);C(b)||D(154);var c=na(b);null===c&&D(155);b=Math.min(a.columnIndex,c.columnIndex);var d=Math.max(a.columnIndex+a.colSpan-1,c.columnIndex+c.colSpan-1),e=Math.min(a.rowIndex,c.rowIndex);a=Math.max(a.rowIndex+a.rowSpan-1,c.rowIndex+c.rowSpan-1);return{fromX:Math.min(b,d),fromY:Math.min(e,a),toX:Math.max(b,d),toY:Math.max(e,a)};};_proto3.getNodes=function getNodes(){function a(u){var z=u.cell,A=u.startColumn,E=u.startRow;t=
Math.min(t,A);v=Math.min(v,E);k=Math.max(k,A+z.__colSpan-1);l=Math.max(l,E+z.__rowSpan-1);}var b=this._cachedNodes;if(null!==b)return b;var c=this.anchor.getNode();b=this.focus.getNode();var d=require("LexicalUtils").$findMatchingParent(c,C);c=require("LexicalUtils").$findMatchingParent(b,C);C(d)||D(152);C(c)||D(154);b=d.getParent();K(b)||D(156);b=b.getParent();M(b)||D(157);var e=c.getParents()[1];if(e!==b){if(b.isParentOf(c)){var f=e.getParent();null==f&&D(159);this.set(this.tableKey,c.getKey(),f.getKey());}else f=b.getParent(),null==f&&D(158),
this.set(this.tableKey,f.getKey(),c.getKey());return this.getNodes();}var _O=O(b,d,c),g=_O[0],n=_O[1],p=_O[2],t=Math.min(n.startColumn,p.startColumn),v=Math.min(n.startRow,p.startRow),k=Math.max(n.startColumn+n.cell.__colSpan-1,p.startColumn+p.cell.__colSpan-1),l=Math.max(n.startRow+n.cell.__rowSpan-1,p.startRow+p.cell.__rowSpan-1);c=t;d=v;e=t;for(var m=v;t<c||v<d||k>e||l>m;){if(t<c){var r=m-d;--c;for(var q=0;q<=r;q++){a(g[d+q][c]);}}if(v<d)for(r=e-c,--d,q=0;q<=r;q++){a(g[d][c+q]);}if(k>e)for(r=m-d,e+=1,q=0;q<=r;q++){a(g[d+
q][e]);}if(l>m)for(r=e-c,m+=1,q=0;q<=r;q++){a(g[m][c+q]);}}b=new Map([[b.getKey(),b]]);c=null;for(d=v;d<=l;d++){for(e=t;e<=k;e++){m=g[d][e].cell;r=m.getParent();K(r)||D(160);r!==c&&b.set(r.getKey(),r);b.set(m.getKey(),m);for(var _iterator=qa(m),_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(_isArray){if(_i>=_iterator.length)break;f=_iterator[_i++];}else{_i=_iterator.next();if(_i.done)break;f=_i.value;}b.set(f.getKey(),f);}c=r;}}f=Array.from(b.values());require("Lexical").isCurrentlyReadOnlyMode()||(this._cachedNodes=f);return f;};_proto3.getTextContent=function getTextContent(){var a=this.getNodes().filter(function(c){return C(c);}),b="";for(var c=0;c<a.length;c++){var d=a[c],e=d.__parent,f=(a[c+1]||{}).__parent;b+=d.getTextContent()+(
f!==e?"\n":"\t");}return b;};return pa;}();function Q(a){return a instanceof pa;}function ra(){var a=require("Lexical").$createPoint("root",0,"element"),b=require("Lexical").$createPoint("root",0,"element");return new pa("root",a,b);}function qa(a){var b=[],c=[a];for(;0<c.length;){var d=c.pop();void 0===d&&D(112);require("Lexical").$isElementNode(d)&&c.unshift.apply(c,d.getChildren());d!==a&&b.push(d);}return b;}var
sa=function(){function sa(a,b){this.isHighlightingCells=!1;this.focusY=this.focusX=this.anchorY=this.anchorX=-1;this.listenersToRemove=new Set();this.tableNodeKey=b;this.editor=a;this.table={columns:0,domRows:[],rows:0};this.focusCell=this.anchorCell=this.focusCellNodeKey=this.anchorCellNodeKey=this.tableSelection=null;this.hasHijackedSelectionStyles=!1;this.trackTable();this.isSelecting=!1;this.abortController=new AbortController();this.listenerOptions={signal:this.abortController.signal};}var _proto4=sa.prototype;_proto4.getTable=function getTable(){return this.table;};_proto4.removeListeners=function removeListeners(){this.abortController.abort("removeListeners");
Array.from(this.listenersToRemove).forEach(function(a){return a();});this.listenersToRemove.clear();};_proto4.trackTable=function trackTable(){var _this4=this;var a=new MutationObserver(function(b){_this4.editor.update(function(){var c=!1;for(var d=0;d<b.length;d++){var e=b[d].target.nodeName;if("TABLE"===e||"TBODY"===e||"THEAD"===e||"TR"===e){c=!0;break;}}if(c){c=_this4.editor.getElementByKey(_this4.tableNodeKey);if(!c)throw Error("Expected to find TableElement in DOM");_this4.table=R(c);}});});this.editor.update(function(){var b=_this4.editor.getElementByKey(_this4.tableNodeKey);if(!b)throw Error("Expected to find TableElement in DOM");
_this4.table=R(b);a.observe(b,{attributes:!0,childList:!0,subtree:!0});});};_proto4.clearHighlight=function clearHighlight(){var _this5=this;var a=this.editor;this.isHighlightingCells=!1;this.focusY=this.focusX=this.anchorY=this.anchorX=-1;this.focusCell=this.anchorCell=this.focusCellNodeKey=this.anchorCellNodeKey=this.tableSelection=null;this.hasHijackedSelectionStyles=!1;this.enableHighlightStyle();a.update(function(){var b=require("Lexical").$getNodeByKey(_this5.tableNodeKey);if(!M(b))throw Error("Expected TableNode.");b=a.getElementByKey(_this5.tableNodeKey);if(!b)throw Error("Expected to find TableElement in DOM");
b=R(b);S(a,b,null);require("Lexical").$setSelection(null);a.dispatchCommand(require("Lexical").SELECTION_CHANGE_COMMAND,void 0);});};_proto4.enableHighlightStyle=function enableHighlightStyle(){var _this6=this;var a=this.editor;a.update(function(){var b=a.getElementByKey(_this6.tableNodeKey);if(!b)throw Error("Expected to find TableElement in DOM");require("LexicalUtils").removeClassNamesFromElement(b,a._config.theme.tableSelection);b.classList.remove("disable-selection");_this6.hasHijackedSelectionStyles=!1;});};_proto4.disableHighlightStyle=function disableHighlightStyle(){var _this7=this;var a=this.editor;a.update(function(){var b=a.getElementByKey(_this7.tableNodeKey);if(!b)throw Error("Expected to find TableElement in DOM");
require("LexicalUtils").addClassNamesToElement(b,a._config.theme.tableSelection);_this7.hasHijackedSelectionStyles=!0;});};_proto4.updateTableTableSelection=function updateTableTableSelection(a){if(null!==a&&a.tableKey===this.tableNodeKey){var b=this.editor;this.tableSelection=a;this.isHighlightingCells=!0;this.disableHighlightStyle();S(b,this.table,this.tableSelection);}else null==a?this.clearHighlight():(this.tableNodeKey=a.tableKey,this.updateTableTableSelection(a));};_proto4.setFocusCellForSelection=function setFocusCellForSelection(a,b){var _this8=this;if(b===void 0){b=!1;}var c=this.editor;c.update(function(){var d=require("Lexical").$getNodeByKey(_this8.tableNodeKey);
if(!M(d))throw Error("Expected TableNode.");if(!c.getElementByKey(_this8.tableNodeKey))throw Error("Expected to find TableElement in DOM");var e=a.x;var f=a.y;_this8.focusCell=a;if(null!==_this8.anchorCell){var g=ea?(c._window||window).getSelection():null;g&&g.setBaseAndExtent(_this8.anchorCell.elem,0,_this8.focusCell.elem,0);}if(!_this8.isHighlightingCells&&(_this8.anchorX!==e||_this8.anchorY!==f||b))_this8.isHighlightingCells=!0,_this8.disableHighlightStyle();else if(e===_this8.focusX&&f===_this8.focusY)return;_this8.focusX=
e;_this8.focusY=f;_this8.isHighlightingCells&&(e=require("Lexical").$getNearestNodeFromDOMNode(a.elem),null!=_this8.tableSelection&&null!=_this8.anchorCellNodeKey&&C(e)&&d.is(T(e))&&(d=e.getKey(),_this8.tableSelection=_this8.tableSelection.clone()||ra(),_this8.focusCellNodeKey=d,_this8.tableSelection.set(_this8.tableNodeKey,_this8.anchorCellNodeKey,_this8.focusCellNodeKey),require("Lexical").$setSelection(_this8.tableSelection),c.dispatchCommand(require("Lexical").SELECTION_CHANGE_COMMAND,void 0),S(c,_this8.table,_this8.tableSelection)));});};_proto4.setAnchorCellForSelection=function setAnchorCellForSelection(a){var _this9=this;this.isHighlightingCells=
!1;this.anchorCell=a;this.anchorX=a.x;this.anchorY=a.y;this.editor.update(function(){var b=require("Lexical").$getNearestNodeFromDOMNode(a.elem);C(b)&&(b=b.getKey(),_this9.tableSelection=null!=_this9.tableSelection?_this9.tableSelection.clone():ra(),_this9.anchorCellNodeKey=b);});};_proto4.formatCells=function formatCells(a){var _this10=this;this.editor.update(function(){var b=require("Lexical").$getSelection();Q(b)||D(11);var c=require("Lexical").$createRangeSelection(),d=c.anchor,e=c.focus,f=b.getNodes().filter(C),g=f[0].getFirstChild(),n=require("Lexical").$isParagraphNode(g)?g.getFormatFlags(a,null):null;f.forEach(function(p){d.set(p.getKey(),
0,"element");e.set(p.getKey(),p.getChildrenSize(),"element");c.formatText(a,n);});require("Lexical").$setSelection(b);_this10.editor.dispatchCommand(require("Lexical").SELECTION_CHANGE_COMMAND,void 0);});};_proto4.clearText=function clearText(){var _this11=this;var a=this.editor;a.update(function(){var b=require("Lexical").$getNodeByKey(_this11.tableNodeKey);if(!M(b))throw Error("Expected TableNode.");var c=require("Lexical").$getSelection();Q(c)||D(11);c=c.getNodes().filter(C);c.length===_this11.table.columns*_this11.table.rows?(b.selectPrevious(),b.remove(),require("Lexical").$getRoot().selectStart()):(c.forEach(function(d){if(require("Lexical").$isElementNode(d)){var e=
require("Lexical").$createParagraphNode(),f=require("Lexical").$createTextNode();e.append(f);d.append(e);d.getChildren().forEach(function(g){g!==e&&g.remove();});}}),S(a,_this11.table,null),require("Lexical").$setSelection(null),a.dispatchCommand(require("Lexical").SELECTION_CHANGE_COMMAND,void 0));});};return sa;}();function ta(a,b){null!==ua(a)&&D(205);a.__lexicalTableSelection=b;}function ua(a){return a.__lexicalTableSelection||null;}function va(a){for(;null!=a;){var b=a.nodeName;if("TD"===b||"TH"===b){a=a._cell;if(void 0===a)break;return a;}a=a.parentNode;}return null;}
function R(a){var b=[],c={columns:0,domRows:b,rows:0};var d=a.querySelector("tr");var e=a=0;for(b.length=0;null!=d;){var f=d.nodeName;if("TD"===f||"TH"===f){f=d;f={elem:f,hasBackgroundColor:""!==f.style.backgroundColor,highlighted:!1,x:a,y:e};d._cell=f;var g=b[e];void 0===g&&(g=b[e]=[]);g[a]=f;}else if(f=d.firstChild,null!=f){d=f;continue;}f=d.nextSibling;if(null!=f)a++,d=f;else if(f=d.parentNode,null!=f){d=f.nextSibling;if(null==d)break;e++;a=0;}}c.columns=a+1;c.rows=e+1;return c;}
function S(a,b,c){var d=new Set(c?c.getNodes():[]);wa(b,function(e,f){var g=e.elem;d.has(f)?(e.highlighted=!0,xa(a,e)):(e.highlighted=!1,ya(a,e),g.getAttribute("style")||g.removeAttribute("style"));});}function wa(a,b){var _a=a;a=_a.domRows;for(var c=0;c<a.length;c++){var d=a[c];if(d)for(var e=0;e<d.length;e++){var f=d[e];if(!f)continue;var g=require("Lexical").$getNearestNodeFromDOMNode(f.elem);null!==g&&b(f,g,{x:e,y:c});}}}function za(a,b){b.disableHighlightStyle();wa(b.table,function(c){c.highlighted=!0;xa(a,c);});}
function Aa(a,b){b.enableHighlightStyle();wa(b.table,function(c){var d=c.elem;c.highlighted=!1;ya(a,c);d.getAttribute("style")||d.removeAttribute("style");});}
var Ba=function Ba(a,b,c,d,e){var f="forward"===e;switch(e){case"backward":case"forward":return c!==(f?a.table.columns-1:0)?(a=b.getCellNodeFromCordsOrThrow(c+(f?1:-1),d,a.table),f?a.selectStart():a.selectEnd()):d!==(f?a.table.rows-1:0)?(a=b.getCellNodeFromCordsOrThrow(f?0:a.table.columns-1,d+(f?1:-1),a.table),f?a.selectStart():a.selectEnd()):f?b.selectNext():b.selectPrevious(),!0;case"up":return 0!==d?b.getCellNodeFromCordsOrThrow(c,d-1,a.table).selectEnd():b.selectPrevious(),!0;case"down":return d!==
a.table.rows-1?b.getCellNodeFromCordsOrThrow(c,d+1,a.table).selectStart():b.selectNext(),!0;default:return!1;}},Ca=function Ca(a,b,c,d,e){var f="forward"===e;switch(e){case"backward":case"forward":return c!==(f?a.table.columns-1:0)&&a.setFocusCellForSelection(b.getDOMCellFromCordsOrThrow(c+(f?1:-1),d,a.table)),!0;case"up":return 0!==d?(a.setFocusCellForSelection(b.getDOMCellFromCordsOrThrow(c,d-1,a.table)),!0):!1;case"down":return d!==a.table.rows-1?(a.setFocusCellForSelection(b.getDOMCellFromCordsOrThrow(c,
d+1,a.table)),!0):!1;default:return!1;}};function U(a,b){if(require("Lexical").$isRangeSelection(a)||Q(a)){var c=b.isParentOf(a.anchor.getNode());a=b.isParentOf(a.focus.getNode());return c&&a;}return!1;}
function xa(a,b){a=b.elem;b=require("Lexical").$getNearestNodeFromDOMNode(a);C(b)||D(131);null===b.getBackgroundColor()?a.style.setProperty("background-color","rgb(172,206,247)"):a.style.setProperty("background-image","linear-gradient(to right, rgba(172,206,247,0.85), rgba(172,206,247,0.85))");a.style.setProperty("caret-color","transparent");}
function ya(a,b){a=b.elem;b=require("Lexical").$getNearestNodeFromDOMNode(a);C(b)||D(131);null===b.getBackgroundColor()&&a.style.removeProperty("background-color");a.style.removeProperty("background-image");a.style.removeProperty("caret-color");}function X(a){a=require("LexicalUtils").$findMatchingParent(a,C);return C(a)?a:null;}function T(a){a=require("LexicalUtils").$findMatchingParent(a,M);return M(a)?a:null;}
function Y(a,b,c,d,e){if(("up"===c||"down"===c)&&Ea(a))return!1;var f=require("Lexical").$getSelection();if(!U(f,d)){if(require("Lexical").$isRangeSelection(f)){if(f.isCollapsed()&&"backward"===c){c=f.anchor.type;d=f.anchor.offset;if("element"!==c&&("text"!==c||0!==d))return!1;c=f.anchor.getNode();if(!c)return!1;c=require("LexicalUtils").$findMatchingParent(c,function(t){return require("Lexical").$isElementNode(t)&&!t.isInline();});if(!c)return!1;c=c.getPreviousSibling();if(!c||!M(c))return!1;Z(b);c.selectEnd();return!0;}if(b.shiftKey&&("up"===c||"down"===c)){a=f.focus.getNode();if(!f.isCollapsed()&&(
"up"===c&&!f.isBackward()||"down"===c&&f.isBackward())){e=require("LexicalUtils").$findMatchingParent(a,function(t){return M(t);});C(e)&&(e=require("LexicalUtils").$findMatchingParent(e,M));if(e!==d||!e)return!1;d="down"===c?e.getNextSibling():e.getPreviousSibling();if(!d)return!1;e=0;"up"===c&&require("Lexical").$isElementNode(d)&&(e=d.getChildrenSize());a=d;"up"===c&&require("Lexical").$isElementNode(d)&&(a=(c=d.getLastChild())?c:d,e=require("Lexical").$isTextNode(a)?a.getTextContentSize():0);c=f.clone();c.focus.set(a.getKey(),e,require("Lexical").$isTextNode(a)?"text":"element");require("Lexical").$setSelection(c);Z(b);return!0;}if(require("Lexical").$isRootOrShadowRoot(a)){if((b=
"up"===c?f.getNodes()[f.getNodes().length-1]:f.getNodes()[0])&&(b=require("LexicalUtils").$findMatchingParent(b,C))&&d.isParentOf(b)){c=d.getFirstDescendant();b=d.getLastDescendant();if(!c||!b)return!1;var _P2=P(c);c=_P2[0];var _P3=P(b);b=_P3[0];c=d.getCordsFromCellNode(c,e.table);b=d.getCordsFromCellNode(b,e.table);c=d.getDOMCellFromCordsOrThrow(c.x,c.y,e.table);b=d.getDOMCellFromCordsOrThrow(b.x,b.y,e.table);e.setAnchorCellForSelection(c);e.setFocusCellForSelection(b,!0);return!0;}}else{d=require("LexicalUtils").$findMatchingParent(a,function(t){return require("Lexical").$isElementNode(t)&&!t.isInline();});
C(d)&&(d=require("LexicalUtils").$findMatchingParent(d,M));if(!d)return!1;d="down"===c?d.getNextSibling():d.getPreviousSibling();if(M(d)&&e.tableNodeKey===d.getKey()){e=d.getFirstDescendant();a=d.getLastDescendant();if(!e||!a)return!1;var _P4=P(e);d=_P4[0];var _P5=P(a);e=_P5[0];f=f.clone();f.focus.set(("up"===c?d:e).getKey(),"up"===c?0:e.getChildrenSize(),"element");Z(b);require("Lexical").$setSelection(f);return!0;}}}}return!1;}if(require("Lexical").$isRangeSelection(f)&&f.isCollapsed()){var _f=f,t=_f.anchor,v=_f.focus;var g=require("LexicalUtils").$findMatchingParent(t.getNode(),C),n=require("LexicalUtils").$findMatchingParent(v.getNode(),
C);if(!C(g)||!g.is(n))return!1;n=T(g);if(n!==d&&null!=n){var p=a.getElementByKey(n.getKey());if(null!=p)return e.table=R(p),Y(a,b,c,n,e);}if("backward"===c||"forward"===c){e=t.type;a=t.offset;g=t.getNode();if(!g)return!1;f=f.getNodes();return 1===f.length&&require("Lexical").$isDecoratorNode(f[0])?!1:Fa(e,a,g,c)?Ga(b,g,d,c):!1;}f=a.getElementByKey(g.__key);n=a.getElementByKey(t.key);if(null==n||null==f)return!1;if("element"===t.type)f=n.getBoundingClientRect();else{f=window.getSelection();if(null===f||0===f.rangeCount)return!1;
f=f.getRangeAt(0).getBoundingClientRect();}n="up"===c?g.getFirstChild():g.getLastChild();if(null==n)return!1;a=a.getElementByKey(n.__key);if(null==a)return!1;a=a.getBoundingClientRect();if("up"===c?a.top>f.top-f.height:f.bottom+f.height>a.bottom){Z(b);f=d.getCordsFromCellNode(g,e.table);if(b.shiftKey)b=d.getDOMCellFromCordsOrThrow(f.x,f.y,e.table),e.setAnchorCellForSelection(b),e.setFocusCellForSelection(b,!0);else return Ba(e,d,f.x,f.y,c);return!0;}}else if(Q(f)){var _f2=f,_t2=_f2.anchor,_v=_f2.focus;p=require("LexicalUtils").$findMatchingParent(_t2.getNode(),
C);n=require("LexicalUtils").$findMatchingParent(_v.getNode(),C);var _f$getNodes=f.getNodes();g=_f$getNodes[0];a=a.getElementByKey(g.getKey());if(!C(p)||!C(n)||!M(g)||null==a)return!1;e.updateTableTableSelection(f);f=R(a);a=d.getCordsFromCellNode(p,f);a=d.getDOMCellFromCordsOrThrow(a.x,a.y,f);e.setAnchorCellForSelection(a);Z(b);if(b.shiftKey)return b=d.getCordsFromCellNode(n,f),Ca(e,g,b.x,b.y,c);n.selectEnd();return!0;}return!1;}function Z(a){a.preventDefault();a.stopImmediatePropagation();a.stopPropagation();}
function Ea(a){return(a=a.getRootElement())?a.hasAttribute("aria-controls")&&"typeahead-menu"===a.getAttribute("aria-controls"):!1;}function Fa(a,b,c,d){return"element"===a&&("backward"===d?null===c.getPreviousSibling():null===c.getNextSibling())||Ha(a,b,c,d);}
function Ha(a,b,c,d){var e=require("LexicalUtils").$findMatchingParent(c,function(f){return require("Lexical").$isElementNode(f)&&!f.isInline();});if(!e)return!1;b="backward"===d?0===b:b===c.getTextContentSize();return"text"===a&&b&&("backward"===d?null===e.getPreviousSibling():null===e.getNextSibling());}
function Ga(a,b,c,d){var e=require("LexicalUtils").$findMatchingParent(b,C);if(!C(e))return!1;var _O2=O(c,e,e),f=_O2[0],g=_O2[1];e=f[0][0];var n=f[f.length-1][f[0].length-1],p=g.startColumn,t=g.startRow;if("backward"===d?p!==e.startColumn||t!==e.startRow:p!==n.startColumn||t!==n.startRow)return!1;b=Ia(b,d,c);if(!b||M(b))return!1;Z(a);"backward"===d?b.selectEnd():b.selectStart();return!0;}
function Ia(a,b,c){if(a=require("LexicalUtils").$findMatchingParent(a,function(d){return require("Lexical").$isElementNode(d)&&!d.isInline();}))return(a="backward"===b?a.getPreviousSibling():a.getNextSibling())&&M(a)?a:"backward"===b?c.getPreviousSibling():c.getNextSibling();}function Ja(a,b,c){var d=require("Lexical").$createParagraphNode();"first"===a?b.insertBefore(d):b.insertAfter(d);d.append.apply(d,c||[]);d.selectEnd();}
function Ka(a,b,c){var d=c.getParent();if(d&&(a=a.getElementByKey(d.getKey()))&&(d=window.getSelection())&&d.anchorNode===a&&(b=require("LexicalUtils").$findMatchingParent(b.anchor.getNode(),function(p){return C(p);}))&&(a=require("LexicalUtils").$findMatchingParent(b,function(p){return M(p);}),M(a)&&a.is(c))){var _O3=O(c,b,b),e=_O3[0],f=_O3[1];c=e[0][0];b=e[e.length-1][e[0].length-1];var g=f.startRow,n=f.startColumn;if(g===c.startRow&&n===c.startColumn)return"first";if(g===b.startRow&&n===b.startColumn)return"last";}}
function La(a,b,c,d){if(a=a.querySelector("colgroup")){var _a2;b=[];for(var e=0;e<c;e++){var f=document.createElement("col"),g=d&&d[e];g&&(f.style.width=g+"px");b.push(f);}(_a2=a).replaceChildren.apply(_a2,b);}}function Ma(a,b,c){c?(require("LexicalUtils").addClassNamesToElement(a,b.theme.tableRowStriping),a.setAttribute("data-lexical-row-striping","true")):(require("LexicalUtils").removeClassNamesFromElement(a,b.theme.tableRowStriping),a.removeAttribute("data-lexical-row-striping"));}var
Na=function(_w$ElementNode3){babelHelpers.inheritsLoose(Na,_w$ElementNode3);Na.getType=function getType(){return"table";};var _proto5=Na.prototype;_proto5.getColWidths=function getColWidths(){return this.getLatest().__colWidths;};_proto5.setColWidths=function setColWidths(a){var b=this.getWritable();b.__colWidths=a;return b;};Na.clone=function clone(a){return new Na(a.__key);};_proto5.afterCloneFrom=function afterCloneFrom(a){_w$ElementNode3.prototype.afterCloneFrom.call(this,a);this.__colWidths=a.__colWidths;this.__rowStriping=a.__rowStriping;};Na.importDOM=function importDOM(){return{table:function table(){return{conversion:Oa,priority:1};}};};Na.importJSON=function importJSON(a){var b=Pa();b.__rowStriping=a.rowStriping||!1;b.__colWidths=a.colWidths;return b;};function Na(a){var _this3;_this3=_w$ElementNode3.call(this,a)||this;
_this3.__rowStriping=!1;return _this3;}_proto5.exportJSON=function exportJSON(){return babelHelpers["extends"]({},_w$ElementNode3.prototype.exportJSON.call(this),{colWidths:this.getColWidths(),rowStriping:this.__rowStriping?this.__rowStriping:void 0,type:"table",version:1});};_proto5.createDOM=function createDOM(a){var b=document.createElement("table"),c=document.createElement("colgroup");b.appendChild(c);La(b,a,this.getColumnCount(),this.getColWidths());require("LexicalUtils").addClassNamesToElement(b,a.theme.table);this.__rowStriping&&Ma(b,a,!0);return b;};_proto5.updateDOM=function updateDOM(a,b,c){a.__rowStriping!==this.__rowStriping&&Ma(b,c,this.__rowStriping);La(b,c,
this.getColumnCount(),this.getColWidths());return!1;};_proto5.exportDOM=function exportDOM(a){return babelHelpers["extends"]({},_w$ElementNode3.prototype.exportDOM.call(this,a),{after:function after(b){if(b){var c=b.cloneNode(),d=document.createElement("colgroup"),e=document.createElement("tbody");if(require("LexicalUtils").isHTMLElement(b)){var f=b.querySelectorAll("col");d.append.apply(d,f);b=b.querySelectorAll("tr");e.append.apply(e,b);}c.replaceChildren(d,e);return c;}}});};_proto5.canBeEmpty=function canBeEmpty(){return!1;};_proto5.isShadowRoot=function isShadowRoot(){return!0;};_proto5.getCordsFromCellNode=function getCordsFromCellNode(a,b){var _b=b,c=_b.rows,d=_b.domRows;for(b=0;b<c;b++){var e=d[b];if(null!=e&&(e=e.findIndex(function(f)
{var _f3;if(f)return(_f3=f,f=_f3.elem,_f3),require("Lexical").$getNearestNodeFromDOMNode(f)===a;}),-1!==e))return{x:e,y:b};}throw Error("Cell not found in table.");};_proto5.getDOMCellFromCords=function getDOMCellFromCords(a,b,c){var _c=c;c=_c.domRows;b=c[b];if(null==b)return null;a=b[a<b.length?a:b.length-1];return null==a?null:a;};_proto5.getDOMCellFromCordsOrThrow=function getDOMCellFromCordsOrThrow(a,b,c){a=this.getDOMCellFromCords(a,b,c);if(!a)throw Error("Cell not found at cords.");return a;};_proto5.getCellNodeFromCords=function getCellNodeFromCords(a,b,c){a=this.getDOMCellFromCords(a,b,c);if(null==a)return null;a=require("Lexical").$getNearestNodeFromDOMNode(a.elem);return C(a)?
a:null;};_proto5.getCellNodeFromCordsOrThrow=function getCellNodeFromCordsOrThrow(a,b,c){a=this.getCellNodeFromCords(a,b,c);if(!a)throw Error("Node at cords not TableCellNode.");return a;};_proto5.getRowStriping=function getRowStriping(){return!!this.getLatest().__rowStriping;};_proto5.setRowStriping=function setRowStriping(a){this.getWritable().__rowStriping=a;};_proto5.canSelectBefore=function canSelectBefore(){return!0;};_proto5.canIndent=function canIndent(){return!1;};_proto5.getColumnCount=function getColumnCount(){var a=this.getFirstChild();if(!a)return 0;var b=0;a.getChildren().forEach(function(c){C(c)&&(b+=c.getColSpan());});return b;};return Na;}(require("Lexical").ElementNode);
function Oa(a){var b=Pa();a.hasAttribute("data-lexical-row-striping")&&b.setRowStriping(!0);var c=a.querySelector(":scope > colgroup");if(c){a=[];for(var _iterator2=c.querySelectorAll(":scope > col"),_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref;if(_isArray2){if(_i2>=_iterator2.length)break;_ref=_iterator2[_i2++];}else{_i2=_iterator2.next();if(_i2.done)break;_ref=_i2.value;}var d=_ref;c=d.style.width;if(!c||!ba.test(c)){a=void 0;break;}a.push(parseFloat(c));}a&&b.setColWidths(a);}return{node:b};}function Pa(){return require("Lexical").$applyNodeReplacement(new Na());}function M(a){return a instanceof Na;}exports.$computeTableMap=O;exports.$computeTableMapSkipCellCheck=ma;exports.$createTableCellNode=B;
exports.$createTableNode=Pa;exports.$createTableNodeWithDimensions=function(a,b,c){if(c===void 0){c=!0;}var d=Pa();for(var f=0;f<a;f++){var g=J();for(var n=0;n<b;n++){var e=x.NO_STATUS;"object"===typeof c?(0===f&&c.rows&&(e|=x.ROW),0===n&&c.columns&&(e|=x.COLUMN)):c&&(0===f&&(e|=x.ROW),0===n&&(e|=x.COLUMN));e=B(e);var p=require("Lexical").$createParagraphNode();p.append(require("Lexical").$createTextNode());e.append(p);g.append(e);}d.append(g);}return d;};exports.$createTableRowNode=J;exports.$createTableSelection=ra;
exports.$deleteTableColumn=function(a,b){var c=a.getChildren();for(var e=0;e<c.length;e++){var d=c[e];if(K(d)){d=d.getChildren();if(b>=d.length||0>b)throw Error("Table column target index out of range");d[b].remove();}}return a;};
exports.$deleteTableColumn__EXPERIMENTAL=function(){var a=require("Lexical").$getSelection();require("Lexical").$isRangeSelection(a)||Q(a)||D(188);var b=a.anchor.getNode();a=a.focus.getNode();var _P6=P(b),c=_P6[0],d=_P6[2];var _P7=P(a),e=_P7[0];var _O4=O(d,c,e),f=_O4[0],g=_O4[1],n=_O4[2];var p=g.startColumn;var t=n.startRow,v=n.startColumn;b=Math.min(p,v);var k=Math.max(p+c.__colSpan-1,v+e.__colSpan-1);a=k-b+1;if(f[0].length===k-b+1)d.selectPrevious(),d.remove();else{var _e,_ref2;var l=f.length;for(var m=0;m<l;m++){for(var r=b;r<=k;r++){var _f$m$r=f[m][r],q=_f$m$r.cell,u=_f$m$r.startColumn;u<b?r===b&&q.setColSpan(q.__colSpan-
Math.min(a,q.__colSpan-(b-u))):u+q.__colSpan-1>k?r===k&&q.setColSpan(q.__colSpan-(k-u+1)):q.remove();}}k=f[t];e=p>v?k[p+c.__colSpan]:k[v+e.__colSpan];void 0!==e?((_e=e,p=_e.cell,_e),N(p)):((_ref2=v<p?k[v-1]:k[p-1],p=_ref2.cell,_ref2),N(p));if(p=d.getColWidths())p=[].concat(p),p.splice(b,a),d.setColWidths(p);}};
exports.$deleteTableRow__EXPERIMENTAL=function(){var a=require("Lexical").$getSelection();require("Lexical").$isRangeSelection(a)||Q(a)||D(188);var _ref3=a.isBackward()?[a.focus.getNode(),a.anchor.getNode()]:[a.anchor.getNode(),a.focus.getNode()],b=_ref3[0],c=_ref3[1],_P8=P(b),d=_P8[0],e=_P8[2];var _P9=P(c),f=_P9[0];var _O5=O(e,d,f),g=_O5[0],n=_O5[1],p=_O5[2];a=n.startRow;var t=p.startRow;f=t+f.__rowSpan-1;if(g.length===f-a+1)e.remove();else{var _v$,_g$;t=g[0].length;var v=g[f+1],k=e.getChildAtIndex(f+1);for(var m=f;m>=a;m--){for(var l=t-1;0<=l;l--){var _g$m$l=g[m][l],r=_g$m$l.cell,q=_g$m$l.startRow,u=_g$m$l.startColumn;if(u===l&&(
m===a&&q<a&&r.setRowSpan(r.__rowSpan-(q-a)),q>=a&&q+r.__rowSpan-1>f))if(r.setRowSpan(r.__rowSpan-(f-q+1)),null===k&&D(122),0===l)la(k,r);else{var z=v[l-1].cell;z.insertAfter(r);}}l=e.getChildAtIndex(m);K(l)||D(206,String(m));l.remove();}void 0!==v?((_v$=v[0],a=_v$.cell,_v$),N(a)):((_g$=g[a-1][0],a=_g$.cell,_g$),N(a));}};exports.$findCellNode=X;exports.$findTableNode=T;exports.$getElementForTableNode=function(a,b){a=a.getElementByKey(b.getKey());if(null==a)throw Error("Table Element Not Found");return R(a);};
exports.$getNodeTriplet=P;exports.$getTableCellNodeFromLexicalNode=function(a){a=require("LexicalUtils").$findMatchingParent(a,function(b){return C(b);});return C(a)?a:null;};exports.$getTableCellNodeRect=na;exports.$getTableColumnIndexFromTableCellNode=function(a){return ha(a).getChildren().findIndex(function(b){return b.is(a);});};exports.$getTableNodeFromLexicalNodeOrThrow=ia;exports.$getTableRowIndexFromTableCellNode=function(a){var b=ha(a);return ia(b).getChildren().findIndex(function(c){return c.is(b);});};exports.$getTableRowNodeFromTableCellNodeOrThrow=ha;
exports.$insertTableColumn=function(a,b,c,d,e){if(c===void 0){c=!0;}var f=a.getChildren(),g=[];for(var t=0;t<f.length;t++){var v=f[t];if(K(v))for(var k=0;k<d;k++){var n=v.getChildren();if(b>=n.length||0>b)throw Error("Table column target index out of range");n=n[b];C(n)||D(12);var _ja=ja(n,e),l=_ja.left,m=_ja.right;var p=x.NO_STATUS;if(l&&l.hasHeaderState(x.ROW)||m&&m.hasHeaderState(x.ROW))p|=x.ROW;p=B(p);p.append(require("Lexical").$createParagraphNode());g.push({newTableCell:p,targetCell:n});}}g.forEach(function(_ref4){var t=_ref4.newTableCell,v=_ref4.targetCell;c?
v.insertAfter(t):v.insertBefore(t);});return a;};
exports.$insertTableColumn__EXPERIMENTAL=function(a){if(a===void 0){a=!0;}function b(k){if(k===void 0){k=x.NO_STATUS;}k=B(k).append(require("Lexical").$createParagraphNode());null===t&&(t=k);return k;}var c=require("Lexical").$getSelection();require("Lexical").$isRangeSelection(c)||Q(c)||D(188);var d=c.anchor.getNode();c=c.focus.getNode();var _P10=P(d);d=_P10[0];var _P11=P(c),e=_P11[0],f=_P11[2],_O6=O(f,e,d),g=_O6[0],n=_O6[1],p=_O6[2];d=g.length;c=a?Math.max(n.startColumn,p.startColumn):Math.min(n.startColumn,p.startColumn);a=a?c+e.__colSpan-1:c-1;c=f.getFirstChild();K(c)||D(120);var t=null;var v=c;a:for(c=0;c<d;c++){0!==c&&(v=v.getNextSibling(),
K(v)||D(121));var k=g[c],l=ka(k[0>a?0:a].cell.__headerState,x.ROW);if(0>a){la(v,b(l));continue;}var _k$a=k[a],m=_k$a.cell,r=_k$a.startColumn,q=_k$a.startRow;if(r+m.__colSpan-1<=a){var u=m,z=q,A=a;for(;z!==c&&1<u.__rowSpan;){if(A-=m.__colSpan,0<=A){var _k$A=k[A],E=_k$A.cell,G=_k$A.startRow;u=E;z=G;}else{v.append(b(l));continue a;}}u.insertAfter(b(l));}else m.setColSpan(m.__colSpan+1);}null!==t&&N(t);if(d=f.getColWidths())d=[].concat(d),a=0>a?0:a,d.splice(a,0,d[a]),f.setColWidths(d);return t;};
exports.$insertTableRow=function(a,b,c,d,e){if(c===void 0){c=!0;}var f=a.getChildren();if(b>=f.length||0>b)throw Error("Table row target index out of range");b=f[b];if(K(b))for(f=0;f<d;f++){var n=b.getChildren(),p=n.length,t=J();for(var v=0;v<p;v++){var g=n[v];C(g)||D(12);var _ja2=ja(g,e),k=_ja2.above,l=_ja2.below;g=x.NO_STATUS;var m=k&&k.getWidth()||l&&l.getWidth()||void 0;if(k&&k.hasHeaderState(x.COLUMN)||l&&l.hasHeaderState(x.COLUMN))g|=x.COLUMN;g=B(g,1,m);g.append(require("Lexical").$createParagraphNode());t.append(g);}c?b.insertAfter(t):b.insertBefore(t);}else throw Error("Row before insertion index does not exist.");
return a;};
exports.$insertTableRow__EXPERIMENTAL=function(a){if(a===void 0){a=!0;}var b=require("Lexical").$getSelection();require("Lexical").$isRangeSelection(b)||Q(b)||D(188);b=b.focus.getNode();var _P12=P(b),c=_P12[0],d=_P12[2],_O7=O(d,c,c),e=_O7[0],f=_O7[1];b=e[0].length;var g=f.startRow;if(a){a=g+c.__rowSpan-1;var n=e[a];g=J();for(var p=0;p<b;p++){var _n$p=n[p],v=_n$p.cell,k=_n$p.startRow;if(k+v.__rowSpan-1<=a){var t=ka(n[p].cell.__headerState,x.COLUMN);g.append(B(t).append(require("Lexical").$createParagraphNode()));}else v.setRowSpan(v.__rowSpan+1);}b=d.getChildAtIndex(a);K(b)||D(145);b.insertAfter(g);b=g;}else{n=e[g];
a=J();for(p=0;p<b;p++){var _n$p2=n[p],v=_n$p2.cell,k=_n$p2.startRow;k===g?(t=ka(n[p].cell.__headerState,x.COLUMN),a.append(B(t).append(require("Lexical").$createParagraphNode()))):v.setRowSpan(v.__rowSpan+1);}b=d.getChildAtIndex(g);K(b)||D(145);b.insertBefore(a);b=a;}return b;};exports.$isTableCellNode=C;exports.$isTableNode=M;exports.$isTableRowNode=K;exports.$isTableSelection=Q;
exports.$removeTableRowAtIndex=function(a,b){var c=a.getChildren();if(b>=c.length||0>b)throw Error("Expected table cell to be inside of table row.");c[b].remove();return a;};
exports.$unmergeCell=function(){var a=require("Lexical").$getSelection();require("Lexical").$isRangeSelection(a)||Q(a)||D(188);a=a.anchor.getNode();var _P13=P(a),b=_P13[0],c=_P13[1],d=_P13[2];a=b.__colSpan;var e=b.__rowSpan;if(1!==a||1!==e){var _O8=O(d,b,b),f=_O8[0],g=_O8[1],n=g.startColumn,p=g.startRow,t=b.__headerState&x.COLUMN,v=Array.from({length:a},function(u,z){u=t;for(var A=0;0!==u&&A<f.length;A++){u&=f[A][z+n].cell.__headerState;}return u;}),k=b.__headerState&x.ROW,l=Array.from({length:e},function(u,z){u=k;for(var A=0;0!==u&&A<f[0].length;A++){u&=f[z+p][A].cell.__headerState;}return u;});
if(1<a){for(var m=1;m<a;m++){b.insertAfter(B(v[m]|l[0]).append(require("Lexical").$createParagraphNode()));}b.setColSpan(1);}if(1<e){var u;for(m=1;m<e;m++){var r=p+m;var z=f[r];u=(u||c).getNextSibling();K(u)||D(125);var q=null;for(var A=0;A<n;A++){var E=z[A],G=E.cell;E.startRow===r&&(q=G);1<G.__colSpan&&(A+=G.__colSpan-1);}if(null===q)for(q=a-1;0<=q;q--){la(u,B(v[q]|l[m]).append(require("Lexical").$createParagraphNode()));}else for(r=a-1;0<=r;r--){q.insertAfter(B(v[r]|l[m]).append(require("Lexical").$createParagraphNode()));}}b.setRowSpan(1);}}};
exports.INSERT_TABLE_COMMAND=da;exports.TableCellHeaderStates=x;exports.TableCellNode=y;exports.TableNode=Na;exports.TableObserver=sa;exports.TableRowNode=I;
exports.applyTableHandlers=function(a,b,c,d){function e(k){k=a.getCordsFromCellNode(k,g.table);return a.getDOMCellFromCordsOrThrow(k.x,k.y,g.table);}var f=c.getRootElement();if(null===f)throw Error("No root element.");var g=new sa(c,a.getKey()),n=c._window||window;ta(b,g);g.listenersToRemove.add(function(){var k=g;ua(b)===k&&delete b.__lexicalTableSelection;});var p=function p(){var k=function k(){g.isSelecting=!1;n.removeEventListener("mouseup",k);n.removeEventListener("mousemove",l);},l=function l(m){setTimeout(function(){if(1!==(m.buttons&
1)&&g.isSelecting)g.isSelecting=!1,n.removeEventListener("mouseup",k),n.removeEventListener("mousemove",l);else{var r=va(m.target);null===r||g.anchorX===r.x&&g.anchorY===r.y||(m.preventDefault(),g.setFocusCellForSelection(r));}},0);};return{onMouseMove:l,onMouseUp:k};};b.addEventListener("mousedown",function(k){setTimeout(function(){if(0===k.button&&n){var l=va(k.target);null!==l&&(Z(k),g.setAnchorCellForSelection(l));var _p=p(),m=_p.onMouseUp,r=_p.onMouseMove;g.isSelecting=!0;n.addEventListener("mouseup",m,g.listenerOptions);
n.addEventListener("mousemove",r,g.listenerOptions);}},0);},g.listenerOptions);n.addEventListener("mousedown",function(k){0===k.button&&c.update(function(){var l=require("Lexical").$getSelection(),m=k.target;Q(l)&&l.tableKey===g.tableNodeKey&&f.contains(m)&&g.clearHighlight();});},g.listenerOptions);g.listenersToRemove.add(c.registerCommand(require("Lexical").KEY_ARROW_DOWN_COMMAND,function(k){return Y(c,k,"down",a,g);},require("Lexical").COMMAND_PRIORITY_HIGH));g.listenersToRemove.add(c.registerCommand(require("Lexical").KEY_ARROW_UP_COMMAND,function(k){return Y(c,k,"up",a,g);},require("Lexical").COMMAND_PRIORITY_HIGH));g.listenersToRemove.add(c.registerCommand(require("Lexical").KEY_ARROW_LEFT_COMMAND,
function(k){return Y(c,k,"backward",a,g);},require("Lexical").COMMAND_PRIORITY_HIGH));g.listenersToRemove.add(c.registerCommand(require("Lexical").KEY_ARROW_RIGHT_COMMAND,function(k){return Y(c,k,"forward",a,g);},require("Lexical").COMMAND_PRIORITY_HIGH));g.listenersToRemove.add(c.registerCommand(require("Lexical").KEY_ESCAPE_COMMAND,function(k){var l=require("Lexical").$getSelection();return Q(l)&&(l=require("LexicalUtils").$findMatchingParent(l.focus.getNode(),C),C(l))?(Z(k),l.selectEnd(),!0):!1;},require("Lexical").COMMAND_PRIORITY_HIGH));var t=function t(k){return function(){var l=require("Lexical").$getSelection();if(!U(l,a))return!1;if(Q(l))return g.clearText(),!0;if(require("Lexical").$isRangeSelection(l)){var m=
require("LexicalUtils").$findMatchingParent(l.anchor.getNode(),function(q){return C(q);});if(!C(m))return!1;var r=l.anchor.getNode();m=l.focus.getNode();r=a.isParentOf(r);m=a.isParentOf(m);if(r&&!m||m&&!r)return g.clearText(),!0;m=(l=require("LexicalUtils").$findMatchingParent(l.anchor.getNode(),function(q){return require("Lexical").$isElementNode(q);}))&&require("LexicalUtils").$findMatchingParent(l,function(q){return require("Lexical").$isElementNode(q)&&C(q.getParent());});if(!require("Lexical").$isElementNode(m)||!require("Lexical").$isElementNode(l))return!1;if(k===require("Lexical").DELETE_LINE_COMMAND&&null===m.getPreviousSibling())return!0;}return!1;};};[require("Lexical").DELETE_WORD_COMMAND,require("Lexical").DELETE_LINE_COMMAND,
require("Lexical").DELETE_CHARACTER_COMMAND].forEach(function(k){g.listenersToRemove.add(c.registerCommand(k,t(k),require("Lexical").COMMAND_PRIORITY_CRITICAL));});var v=function v(k){var l=require("Lexical").$getSelection();if(!Q(l)&&!require("Lexical").$isRangeSelection(l))return!1;var m=a.isParentOf(l.anchor.getNode()),r=a.isParentOf(l.focus.getNode());if(m!==r){k=m?"focus":"anchor";var _l$k=l[k],q=_l$k.key,u=_l$k.offset,z=_l$k.type;a[l[m?"anchor":"focus"].isBefore(l[k])?"selectPrevious":"selectNext"]()[k].set(q,u,z);return!1;}return Q(l)?(k&&(k.preventDefault(),k.stopPropagation()),g.clearText(),
!0):!1;};g.listenersToRemove.add(c.registerCommand(require("Lexical").KEY_BACKSPACE_COMMAND,v,require("Lexical").COMMAND_PRIORITY_CRITICAL));g.listenersToRemove.add(c.registerCommand(require("Lexical").KEY_DELETE_COMMAND,v,require("Lexical").COMMAND_PRIORITY_CRITICAL));g.listenersToRemove.add(c.registerCommand(require("Lexical").CUT_COMMAND,function(k){var l=require("Lexical").$getSelection();if(l){if(!Q(l)&&!require("Lexical").$isRangeSelection(l))return!1;void require("LexicalClipboard").copyToClipboard(c,require("LexicalUtils").objectKlassEquals(k,ClipboardEvent)?k:null,require("LexicalClipboard").$getClipboardDataFromSelection(l));k=v(k);return require("Lexical").$isRangeSelection(l)?(l.removeText(),!0):k;}return!1;},
require("Lexical").COMMAND_PRIORITY_CRITICAL));g.listenersToRemove.add(c.registerCommand(require("Lexical").FORMAT_TEXT_COMMAND,function(k){var l=require("Lexical").$getSelection();if(!U(l,a))return!1;if(Q(l))return g.formatCells(k),!0;require("Lexical").$isRangeSelection(l)&&(k=require("LexicalUtils").$findMatchingParent(l.anchor.getNode(),function(m){return C(m);}),C(k));return!1;},require("Lexical").COMMAND_PRIORITY_CRITICAL));g.listenersToRemove.add(c.registerCommand(require("Lexical").FORMAT_ELEMENT_COMMAND,function(k){var l=require("Lexical").$getSelection();if(!Q(l)||!U(l,a))return!1;var m=l.anchor.getNode();l=l.focus.getNode();if(!C(m)||!C(l))return!1;var _O9=
O(a,m,l),r=_O9[0],q=_O9[1],u=_O9[2];m=Math.max(q.startRow,u.startRow);l=Math.max(q.startColumn,u.startColumn);var z=Math.min(q.startRow,u.startRow);var A=Math.min(q.startColumn,u.startColumn);for(;z<=m;z++){for(var G=A;G<=l;G++){var E=r[z][G].cell;E.setFormat(k);E=E.getChildren();for(var L=0;L<E.length;L++){var H=E[L];require("Lexical").$isElementNode(H)&&!H.isInline()&&H.setFormat(k);}}}return!0;},require("Lexical").COMMAND_PRIORITY_CRITICAL));g.listenersToRemove.add(c.registerCommand(require("Lexical").CONTROLLED_TEXT_INSERTION_COMMAND,function(k){var l=require("Lexical").$getSelection();if(!U(l,
a))return!1;if(Q(l))g.clearHighlight();else if(require("Lexical").$isRangeSelection(l)){var m=require("LexicalUtils").$findMatchingParent(l.anchor.getNode(),function(r){return C(r);});if(!C(m))return!1;if("string"===typeof k&&(l=Ka(c,l,a)))return Ja(l,a,[require("Lexical").$createTextNode(k)]),!0;}return!1;},require("Lexical").COMMAND_PRIORITY_CRITICAL));d&&g.listenersToRemove.add(c.registerCommand(require("Lexical").KEY_TAB_COMMAND,function(k){var l=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(l)||!l.isCollapsed()||!U(l,a))return!1;l=X(l.anchor.getNode());if(null===l)return!1;Z(k);l=a.getCordsFromCellNode(l,g.table);
Ba(g,a,l.x,l.y,k.shiftKey?"backward":"forward");return!0;},require("Lexical").COMMAND_PRIORITY_CRITICAL));g.listenersToRemove.add(c.registerCommand(require("Lexical").FOCUS_COMMAND,function(){return a.isSelected();},require("Lexical").COMMAND_PRIORITY_HIGH));g.listenersToRemove.add(c.registerCommand(require("Lexical").SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,function(k){var _k=k,l=_k.nodes,m=_k.selection;k=m.getStartEndPoints();var r=Q(m);r=require("Lexical").$isRangeSelection(m)&&null!==require("LexicalUtils").$findMatchingParent(m.anchor.getNode(),function(H){return C(H);})&&null!==require("LexicalUtils").$findMatchingParent(m.focus.getNode(),function(H){return C(H);})||r;if(1!==l.length||
!M(l[0])||!r||null===k)return!1;var _k2=k,q=_k2[0],u=l[0];k=u.getChildren();r=u.getFirstChildOrThrow().getChildrenSize();u=u.getChildrenSize();var z=require("LexicalUtils").$findMatchingParent(q.getNode(),function(H){return C(H);}),A=z&&require("LexicalUtils").$findMatchingParent(z,function(H){return K(H);}),E=A&&require("LexicalUtils").$findMatchingParent(A,function(H){return M(H);});if(!C(z)||!K(A)||!M(E))return!1;q=A.getIndexWithinParent();var G=Math.min(E.getChildrenSize()-1,q+u-1);u=z.getIndexWithinParent();z=Math.min(A.getChildrenSize()-1,u+r-1);r=Math.min(u,z);A=Math.min(q,G);u=Math.max(u,z);q=Math.max(q,G);E=E.getChildren();
for(G=0;A<=q;A++){z=E[A];if(!K(z))return!1;var L=k[G];if(!K(L))return!1;z=z.getChildren();L=L.getChildren();var H=0;var _loop=function _loop(V){var oa=z[V];if(!C(oa))return{v:!1};var Da=L[H];if(!C(Da))return{v:!1};var Qa=oa.getChildren();Da.getChildren().forEach(function(W){require("Lexical").$isTextNode(W)&&require("Lexical").$createParagraphNode().append(W);oa.append(W);});Qa.forEach(function(W){return W.remove();});H++;};for(var V=r;V<=u;V++){var _ret=_loop(V);if(typeof _ret==="object")return _ret.v;}G++;}return!0;},require("Lexical").COMMAND_PRIORITY_CRITICAL));g.listenersToRemove.add(c.registerCommand(require("Lexical").SELECTION_CHANGE_COMMAND,function(){var k=require("Lexical").$getSelection(),l=require("Lexical").$getPreviousSelection();
if(require("Lexical").$isRangeSelection(k)){var _O10,_O11;var z=k.anchor,A=k.focus;var m=z.getNode(),r=A.getNode(),q=X(m),u=X(r);var E=!(!q||!a.is(T(q))),G=!(!u||!a.is(T(u)));m=E!==G;var L=E&&G;r=k.isBackward();m?(m=k.clone(),G?((_O10=O(a,u,u),u=_O10[0],_O10),q=u[0][0].cell,u=u[u.length-1].at(-1).cell,m.focus.set(r?q.getKey():u.getKey(),r?q.getChildrenSize():u.getChildrenSize(),"element")):E&&((_O11=O(a,q,q),u=_O11[0],_O11),q=u[0][0].cell,u=u[u.length-1].at(-1).cell,m.anchor.set(r?u.getKey():q.getKey(),r?u.getChildrenSize():0,"element")),require("Lexical").$setSelection(m),za(c,
g)):L&&!q.is(u)&&(g.setAnchorCellForSelection(e(q)),g.setFocusCellForSelection(e(u),!0),g.isSelecting||setTimeout(function(){var _p2=p(),H=_p2.onMouseUp,V=_p2.onMouseMove;g.isSelecting=!0;n.addEventListener("mouseup",H);n.addEventListener("mousemove",V);},0));}else k&&Q(k)&&k.is(l)&&k.tableKey===a.getKey()&&(r=ea?(c._window||window).getSelection():null)&&r.anchorNode&&r.focusNode&&(m=(m=require("Lexical").$getNearestNodeFromDOMNode(r.focusNode))&&!a.is(T(m)),q=(q=require("Lexical").$getNearestNodeFromDOMNode(r.anchorNode))&&a.is(T(q)),m&&q&&0<r.rangeCount&&(
m=require("Lexical").$createRangeSelectionFromDom(r,c)))&&(m.anchor.set(a.getKey(),k.isBackward()?a.getChildrenSize():0,"element"),r.removeAllRanges(),require("Lexical").$setSelection(m));if(k&&!k.is(l)&&(Q(k)||Q(l))&&g.tableSelection&&!g.tableSelection.is(l))return Q(k)&&k.tableKey===g.tableNodeKey?g.updateTableTableSelection(k):!Q(k)&&Q(l)&&l.tableKey===g.tableNodeKey&&g.updateTableTableSelection(null),!1;g.hasHijackedSelectionStyles&&!a.isSelected()?Aa(c,g):!g.hasHijackedSelectionStyles&&a.isSelected()&&za(c,g);return!1;},require("Lexical").COMMAND_PRIORITY_CRITICAL));
g.listenersToRemove.add(c.registerCommand(require("Lexical").INSERT_PARAGRAPH_COMMAND,function(){var k=require("Lexical").$getSelection();return require("Lexical").$isRangeSelection(k)&&k.isCollapsed()&&U(k,a)?(k=Ka(c,k,a))?(Ja(k,a),!0):!1:!1;},require("Lexical").COMMAND_PRIORITY_CRITICAL));return g;};exports.getDOMCellFromTarget=va;exports.getTableObserverFromTableElement=ua;}),null);
__d("trustHTML",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b;if((b=window.trustedTypes)==null?void 0:b.createPolicy){b=window.trustedTypes.createPolicy("lexical",{createHTML:function(a){return a}});return b.createHTML(a)}return a}f["default"]=a}),66);
__d("MLCUtils",["Lexical","LexicalSelection","LexicalTable","LexicalUtils","err","nullthrows","trustHTML"],(function(a,b,c,d,e,f,g){"use strict";var h={tag:"history-merge"};function i(a,b){a=a.getParent();while(a!==null){if(b(a))return a;a=a.getParent()}return null}function a(a,b){return i(a,b)!==null}function b(a){var b=d("Lexical").$getSelection();if(b!==null)return b;b=a.getEditorState()._selection;if(b===null)return null;a=b.clone();d("Lexical").$setSelection(a);return a}function e(a,b,d){d===void 0&&(d=!0);a=a._nodes.get(b.getType());if(a!==void 0){a=a.klass;if(a!==b){if(d)throw c("err")("Node type is registered but the class reference does not match");return!1}return!0}return!1}function j(a){a=a._nodes;var b=[];for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=e[1];b.push(e.klass)}return b}function f(a,b){var c=[],e=j(a);for(var e=e,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;typeof h==="function"&&c.push(a.registerNodeTransform(h,b))}return d("LexicalUtils").mergeRegister.apply(void 0,c)}function k(a){var b=a.anchor,c=a.focus,e=a.anchor.getNode(),f=a.focus.getNode();if(e===f)return e;a=a.isBackward();if(a)return d("LexicalSelection").$isAtNodeEnd(c)?e:f;else return d("LexicalSelection").$isAtNodeEnd(b)?f:e}function l(){var a=d("Lexical").$getSelection();if(a===null)return null;var b;if(d("Lexical").$isRangeSelection(a)||d("LexicalTable").$isTableSelection(a))b=a.focus.getNode();else{a=a.getNodes();b=a[a.length-1]}a=d("LexicalUtils").$findMatchingParent(b,d("LexicalTable").$isTableCellNode);return d("LexicalTable").$isTableCellNode(a)?a:null}function m(){var a=d("Lexical").$getSelection();if(!d("Lexical").$isRangeSelection(a)||!a.isCollapsed())return!1;a=a.anchor.getNode();return d("Lexical").$isElementNode(a)&&d("Lexical").$isBlockElementNode(a)&&a.getTextContentSize()===0}var n=new WeakMap();function o(a,b,c){var d=n.get(a);d===void 0&&(d=new Map(),n.set(a,d));d.set(b,c);return a.dispatchCommand(b,c)}function p(a){var b=d("Lexical").$getSelection(),e;if(b===null){var f=d("Lexical").$getRoot();e=f.getLastChild();if(e===null){f.append.apply(f,a);return}}else d("Lexical").$isRangeSelection(b)?e=b.focus.getNode():e=c("nullthrows")(b.getNodes().at(-1));e=e.getTopLevelElementOrThrow();for(f=a.length-1;f>=0;f--)e.insertAfter(a[f])}function q(a,b){return(a=(a=n.get(a))==null?void 0:a.get(b))!=null?a:null}function r(a,b,c,d){var e=q(a,b);e!==null&&c(e,a);return a.registerCommand(b,c,d)}function s(a,b,d){b===void 0&&(b=800);d===void 0&&(d=600);a=a.getRootElement();if(a===null)return;b=window.open("","print","width="+b+",height="+d);b.document.body.innerHTML=c("trustHTML")(a.innerHTML);b.print()}g.UPDATE_HISTORY_MERGE_OPTIONS=h;g.$getAncestorPredicate=i;g.$hasAncestorPredicate=a;g.$ifNullRestoreActiveSelection=b;g.lexicalNodeIsRegistered=e;g.lexicalNodes=j;g.registerEveryNodeTransform=f;g.getSelectedNode=k;g.$getActiveTableCellNode=l;g.$isCollapsedSelectionOnEmptyBlockElement=m;g.dispatchCommandWithLVC=o;g.$insertNodesAfterBlock=p;g.lastCommandWithLVCPayload=q;g.registerCommandWithLVC=r;g.print=s}),98);
__d("MLCAutocompleteNode",["Lexical","MLCAutocompletePlugin","MLCUtils","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState,l=function(b){babelHelpers.inheritsLoose(a,b);a.clone=function(b){return new a(b.__uuid,b.__key)};a.getType=function(){return"autocomplete"};a.importJSON=function(a){return m(a.uuid)};var c=a.prototype;c.exportJSON=function(){return{type:"autocomplete",uuid:this.__uuid,version:1}};function a(a,c){c=b.call(this,c)||this;c.__uuid=a;return c}c.updateDOM=function(a,b,c){return!1};c.createDOM=function(a){return document.createElement("span")};c.decorate=function(a){return this.__uuid!==d("MLCAutocompletePlugin").AutocompleteUUID?null:i.jsx(n,{editor:a})};return a}(d("Lexical").DecoratorNode);function m(a){return new l(a)}function a(a){return a instanceof l}function n(a){var b=a.editor;a=k(d("MLCUtils").lastCommandWithLVCPayload(b,d("MLCAutocompletePlugin").AUTOCOMPLETE_SUGGESTION_COMMAND));var c=a[0],e=a[1];j(function(){return d("MLCUtils").registerCommandWithLVC(b,d("MLCAutocompletePlugin").AUTOCOMPLETE_SUGGESTION_COMMAND,function(a){e(a);return!1},d("Lexical").COMMAND_PRIORITY_LOW)},[b]);a=d("MLCAutocompletePlugin").ComponentMap.get(b);if(a===void 0)return null;return c===null||c.length===0?null:i.jsx(a,{suggestion:c})}n.displayName=n.name+" [from "+f.id+"]";g.MLCAutocompleteNode=l;g.$createMLCAutocompleteNode=m;g.$isMLCAutocompleteNode=a}),98);
__d("MLCAutocompletePlugin",["FBLogger","Lexical","LexicalComposerContext","LexicalSelection","LexicalUtils","MLCAutocompleteNode","MLCUtils","react","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));var i=h.useEffect,j=new WeakMap(),k=c("uuidv4")(),l=d("Lexical").createCommand("AUTOCOMPLETE_SUGGESTION_COMMAND");function m(a){if(!d("Lexical").$isRangeSelection(a)||!a.isCollapsed())return null;var b=a.getNodes()[0];a=a.anchor;if(!d("Lexical").$isTextNode(b)||!b.isSimpleText()||!d("LexicalSelection").$isAtNodeEnd(a))return null;a=b.getTextContent();return a.trim().length===0?null:a}function a(a){var b=a.Component,e=a.getSuggestion,f=a.onAccept;a=d("LexicalComposerContext").useLexicalComposerContext();var g=a[0];i(function(){if(j.has(g))throw c("FBLogger")("lexical").mustfixThrow("MLCAutocompletePlugin registered twice");j.set(g,b);return function(){j["delete"](g)}},[b,g]);i(function(){var a=null,b=null,c=null,h=null;function i(){var e=a!==null?d("Lexical").$getNodeByKey(a):null;e!==null&&e.isAttached()&&(e.remove(),a=null);b=null;c=null;h=null;d("MLCUtils").dispatchCommandWithLVC(g,l,null)}function j(b){var c=b.getKey();b.__uuid===k&&c!==a&&i()}function n(){g.update(function(){var f=d("Lexical").$getSelection();if(!d("Lexical").$isRangeSelection(f)){i();return}h!==f.anchor.key&&(b=null,c=null);var j=m(f);if(j==null||j.length===0){i();return}if(j===b)return;b=j;j=e(j);if(c!=null&&c===j)return;c=j;if(j==null||j.length===0){i();return}var n=a!==null?d("Lexical").$getNodeByKey(a):null;if(n==null||!n.isAttached()){n==null?void 0:n.remove();var o=f.clone(),p=d("MLCAutocompleteNode").$createMLCAutocompleteNode(k);a=p.getKey();o.insertNodes([p]);d("Lexical").$setSelection(o)}else if(f.anchor.key!==h){n.remove();p=f.clone();p.insertNodes([n]);d("Lexical").$setSelection(p);h=p.anchor.key}d("MLCUtils").dispatchCommandWithLVC(g,l,j)})}function o(){if(a===null)return!1;var b=d("Lexical").$getNodeByKey(a);if(b===null)return!1;if(c===null)return!1;var e=d("Lexical").$createTextNode(c);b.replace(e);e.selectNext();f!=null&&c!=null&&f(c);i();return!0}function p(a){if(o()){a.preventDefault();return!0}return!1}function q(){g.update(function(){i()})}return d("LexicalUtils").mergeRegister(g.registerNodeTransform(d("MLCAutocompleteNode").MLCAutocompleteNode,j),g.registerUpdateListener(n),g.registerCommand((j=d("Lexical")).KEY_TAB_COMMAND,p,j.COMMAND_PRIORITY_HIGH),g.registerCommand(j.KEY_ARROW_RIGHT_COMMAND,p,j.COMMAND_PRIORITY_HIGH),q)},[g,e,f]);return null}a.displayName=a.name+" [from "+f.id+"]";g.ComponentMap=j;g.AutocompleteUUID=k;g.AUTOCOMPLETE_SUGGESTION_COMMAND=l;g.AutocompletePlugin=a}),98);
__d("UnifiedShareSheetMessengerComposer.react",["fbt","CometComposerEditorForLexicalBootstrapPlugin.react","CometLexicalContentEditable.react","CometLexicalPlaceholder.react","FDSText.react","FeedComposerCometTextStyleContext","Lexical","LexicalComposerContext","LexicalErrorBoundary","LexicalHistoryPlugin","LexicalLinkPlugin","LexicalPlainTextPlugin","UnifiedShareSheetConstants","react","stylex","useUnifiedShareSheetLogger"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;b.useCallback;var l=b.useEffect;b.useMemo;var m=b.useRef,n=b.c,o={editor:{alignItems:"x6s0dn4",cursor:"x1ed109x",display:"x1lliihq",fontSize:"x6prxxf",height:"x5yr21d",overflowY:"x1odjw0f",position:"x1n2onr6",width:"xh8yej3",$$css:!0},form:{backgroundColor:"xmjcpbm",borderTopStartRadius:"x107yiy2",borderTopEndRadius:"xv8uw2v",borderBottomEndRadius:"x1tfwpuw",borderBottomStartRadius:"x2g32xy",cursor:"x1ed109x",display:"x78zum5",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",maxHeight:"xo1bdp9",minHeight:"xisnujt",paddingTop:"x1y1aw1k",paddingEnd:"x1pi30zi",paddingBottom:"xwib8y2",paddingStart:"x1swvt13",position:"x1n2onr6",$$css:!0},placeholder:{alignItems:"x6s0dn4",display:"x78zum5",height:"x5yr21d",$$css:!0}};function a(a){var b=n(27),e=a.editor,f=a.feedLocation,g=a.shareableID,j=a.shareSheetComponentVariant,p=a.sharingComponentName;a=a.xstyle;var q;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(q=d("LexicalComposerContext").createLexicalComposerContext(),b[0]=q):q=b[0];b[1]!==e?(q=[e,q],b[1]=e,b[2]=q):q=b[2];q=q;q=q;var r=c("useUnifiedShareSheetLogger")(),s=r.onShareOptionSelected,t;b[3]!==e||b[4]!==s||b[5]!==f||b[6]!==g||b[7]!==p||b[8]!==j?(r=function(){return e.registerCommand(d("Lexical").FOCUS_COMMAND,function(){s({entry_point:f,shareable_entity_fbid:g,sharing_component_name:p,sharing_component_variant:j});return!0},d("Lexical").COMMAND_PRIORITY_EDITOR)},t=[e,f,s,g,j,p],b[3]=e,b[4]=s,b[5]=f,b[6]=g,b[7]=p,b[8]=j,b[9]=r,b[10]=t):(r=b[9],t=b[10]);l(r,t);b[11]===Symbol["for"]("react.memo_cache_sentinel")?(r=d("LexicalHistoryPlugin").createEmptyHistoryState(),b[11]=r):r=b[11];t=r;r=t;t=m(null);var u=m(null),v;b[12]===Symbol["for"]("react.memo_cache_sentinel")?(v=function(a){a=(a=a)!=null?a:null;u.current=a},b[12]=v):v=b[12];v=v;var w;b[13]===Symbol["for"]("react.memo_cache_sentinel")?(w=h._("__JHASH__R7hbXAekzQ8__JHASH__"),b[13]=w):w=b[13];w=w;var x;b[14]!==a?(x=(i||(i=c("stylex")))(o.form,a),b[14]=a,b[15]=x):x=b[15];b[16]===Symbol["for"]("react.memo_cache_sentinel")?(a="x78zum5 x1iyjqo2 x5yr21d x1n2onr6",b[16]=a):a=b[16];var y;b[17]===Symbol["for"]("react.memo_cache_sentinel")?(y=w.toString(),b[17]=y):y=b[17];b[18]===Symbol["for"]("react.memo_cache_sentinel")?(y=k.jsx(d("LexicalPlainTextPlugin").PlainTextPlugin,{ErrorBoundary:d("LexicalErrorBoundary").LexicalErrorBoundary,contentEditable:k.jsx(c("CometLexicalContentEditable.react"),{"aria-placeholder":y,contentEditableRef:v,isInitiallyFocused:!0,placeholder:k.jsx(c("CometLexicalPlaceholder.react"),{xstyle:o.placeholder,children:k.jsx(c("FDSText.react"),{color:"placeholder",numberOfLines:1,type:"body3",children:w})}),spellCheck:!0,tabIndex:0,xstyle:o.editor})}),v=k.jsx(d("LexicalLinkPlugin").LinkPlugin,{}),w=k.jsx(d("LexicalHistoryPlugin").HistoryPlugin,{externalHistoryState:r}),r=k.jsx(c("CometComposerEditorForLexicalBootstrapPlugin.react"),{autoFocus:!0,inputElementRef:u,textAlignment:"left"}),b[18]=y,b[19]=v,b[20]=w,b[21]=r):(y=b[18],v=b[19],w=b[20],r=b[21]);b[22]!==q?(a=k.jsx("div",{className:a,children:k.jsx(c("FeedComposerCometTextStyleContext").Provider,{value:d("UnifiedShareSheetConstants").TEXT_STYLE,children:k.jsxs(d("LexicalComposerContext").LexicalComposerContext.Provider,{value:q,children:[y,v,w,r]})})}),b[22]=q,b[23]=a):a=b[23];b[24]!==x||b[25]!==a?(y=k.jsx("form",{className:x,method:"POST",ref:t,children:a}),b[24]=x,b[25]=a,b[26]=y):y=b[26];return y}g["default"]=a}),226);
__d("UnifiedShareSheetMessengerLexicalCreateEditor",["CometLexicalDelightNode","CometLexicalEmojiNode","CometLexicalGenericEntityNode","FBLogger","Lexical","LexicalLink","LexicalOverflow","MLCAutocompleteNode","cometLexicalBaseTheme","mlcErrorHandler__INTERNAL"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("Lexical").createEditor({namespace:"UnifiedShareSheetMessengerComposer",nodes:[d("CometLexicalGenericEntityNode").CometLexicalGenericEntityNode,d("CometLexicalEmojiNode").EmojiNode,d("CometLexicalDelightNode").CometLexicalDelightNode,d("MLCAutocompleteNode").MLCAutocompleteNode,d("LexicalOverflow").OverflowNode,d("LexicalLink").LinkNode].filter(Boolean),onError:function(b){return c("mlcErrorHandler__INTERNAL")(b,a,function(a){c("FBLogger")("unfied_share_sheet_messenger_composer").catching(b).mustfix("Lexical Error: %s",a)})},theme:babelHelpers["extends"]({},c("cometLexicalBaseTheme"),{characterLimit:"xayplqe xt0psk2",paragraph:"xdj266r x11i5rnm xat24cr x1mh8g0r x16tdsg8"})});return a}g["default"]=a}),98);
__d("UnifiedShareSheetMessengerMultiSelectionDialogQuery.graphql",["UnifiedShareSheetMessengerMultiSelectionDialogQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnifiedShareSheetMessengerMultiSelectionDialogQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"UnifiedShareSheetSendMessageButton_viewer"}]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UnifiedShareSheetMessengerMultiSelectionDialogQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{"if":null,kind:"Defer",label:"UnifiedShareSheetMessengerMultiSelectionDialogQuery$defer$UnifiedShareSheetSendMessageButton_viewer",selections:[{alias:null,args:null,kind:"ScalarField",name:"chat_tabs_turned_off",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]}],storageKey:null}]},params:{id:b("UnifiedShareSheetMessengerMultiSelectionDialogQuery_facebookRelayOperation"),metadata:{},name:"UnifiedShareSheetMessengerMultiSelectionDialogQuery",operationKind:"query",text:null}};b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("UnifiedShareSheetMultiSelectionContextProvider",["UnifiedShareSheetConstants","UnifiedShareSheetMultiSelectionContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useMemo;var j=b.c;function a(a){var b=j(15),e=a.children,f=a.initialSelectedTarget,g=a.setSendButtonStatus,h;b[0]!==f?(h=new Map(),f!=null&&!h.has(f.id)&&h.set(f.id,f),b[0]=f,b[1]=h):h=b[1];b[2]!==h||b[3]!==g?(a=function(a){a!=null&&(h.has(a.id)||h.set(a.id,a),h.size>1&&h.size===2?g(d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.SEND_SEPARATELY):h.size===1&&g(d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.SEND))},b[2]=h,b[3]=g,b[4]=a):a=b[4];f=a;b[5]!==h||b[6]!==g?(a=function(a){a!=null&&(h.has(a)&&h["delete"](a),h.size<=1&&h.size===1?g(d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.SEND):h.size===0&&g(d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.DISABLED))},b[5]=h,b[6]=g,b[7]=a):a=b[7];a=a;var k;b[8]!==f||b[9]!==a||b[10]!==h?(k={AddSeletectTarget:f,RemoveSelectedTarget:a,selectedTargets:h},b[8]=f,b[9]=a,b[10]=h,b[11]=k):k=b[11];f=k;a=f;b[12]!==a||b[13]!==e?(k=i.jsx(c("UnifiedShareSheetMultiSelectionContext").Provider,{value:a,children:e}),b[12]=a,b[13]=e,b[14]=k):k=b[14];return k}g["default"]=a}),98);
__d("UnifiedShareSheetMessengerMultiSelectionDialog.react",["fbt","CometColumn.react","CometColumnItem.react","CometErrorBoundary.react","CometPlaceholder.react","CometRelay","CometUnifiedShareSheetErrorState.react","FDSDialogHeader.react","FDSDialogPage.react","MWFacebookUserWithoutMessengerAccess","UnifiedShareSheetConstants","UnifiedShareSheetHScrollContainerPlaceholder.react","UnifiedShareSheetMessengerLexicalCreateEditor","UnifiedShareSheetMessengerMultiSelectionDialogQuery$Parameters","UnifiedShareSheetMessengerMultiSelectionDialogQuery.graphql","UnifiedShareSheetMessengerSection.react","UnifiedShareSheetMultiSelectionContextProvider","UnifiedShareSheetSendMessageButtonPlaceholder.react","UnifiedShareSheetSendMessageComposerPlaceholder.react","deferredLoadComponent","react","requireDeferredForDisplay","usePartialViewImpression","usePopPage","useRefetchablePreloadedQuery","useUnifiedShareSheetLogger"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));e=j;var l=e.useCallback,m=e.useMemo,n=e.useState,o=c("deferredLoadComponent")(c("requireDeferredForDisplay")("UnifiedShareSheetMessengerComposer.react").__setRef("UnifiedShareSheetMessengerMultiSelectionDialog.react")),p=c("deferredLoadComponent")(c("requireDeferredForDisplay")("UnifiedShareSheetSendMessageButton.react").__setRef("UnifiedShareSheetMessengerMultiSelectionDialog.react")),q=i!==void 0?i:i=b("UnifiedShareSheetMessengerMultiSelectionDialogQuery.graphql");function a(a){var b=a.props;a=a.queries;var e=c("useRefetchablePreloadedQuery")(c("UnifiedShareSheetMessengerMultiSelectionDialogQuery$Parameters"),a.multipleSelectionQueryReference),f=e[0];e=e[1];e=d("CometRelay").usePreloadedQuery(q,e);var g=a.multipleSelectionQueryReference.variables,i=l(function(){f(g)},[f,g]),j=b.LSresults,r=b.feedLocation,s=b.feedTracking,t=b.hasLightSpeedResults,u=b.initialScrollToIndex,v=b.initialSelectedTarget,w=b.onClose,x=b.shareableID,y=b.storyData,z=m(function(){return{editor:c("UnifiedShareSheetMessengerLexicalCreateEditor")(),inputState:{__type:"lexical-editor-state-based"}}},[]);z=z.editor;var A=c("useUnifiedShareSheetLogger")(),B=A.onSharesheetImpression,C=c("usePopPage")();A=c("usePartialViewImpression")({onImpressionStart:function(){B({entry_point:b.feedLocation,shareable_entity_fbid:x,sharing_component_name:"hscroll_multiselect_suggested_recipient",sharing_component_variant:"unified_share_sheet"})}});var D=n(d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.SEND),E=D[0];D=D[1];var F=d("MWFacebookUserWithoutMessengerAccess").useIsFacebookUserWithoutMessengerAccess(),G=h._("__JHASH__dCysyBJfkNb__JHASH__"),H=h._("__JHASH__v5lMsoiFXPW__JHASH__");F=F?H:G;return k.jsx(c("UnifiedShareSheetMultiSelectionContextProvider"),{initialSelectedTarget:v,setSendButtonStatus:D,children:k.jsx(c("FDSDialogPage.react"),{footer:null,header:k.jsx(c("FDSDialogHeader.react"),{onBack:function(){C&&C()},onClose:w,text:F,withBackButton:!0,withCloseButton:!0}),mobileFullHeight:!1,children:k.jsx(c("CometErrorBoundary.react"),{fallback:function(a){return k.jsx(c("CometUnifiedShareSheetErrorState.react"),{handleRefresh:i})},children:k.jsxs(c("CometColumn.react"),{paddingTop:8,paddingVertical:16,ref:A,spacing:16,children:[k.jsx(c("CometColumnItem.react"),{paddingHorizontal:0,children:k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx(c("UnifiedShareSheetHScrollContainerPlaceholder.react"),{}),name:"UnifiedShareSheetMessengerMultiSelectionDialog.MessengerSection",children:k.jsx(c("UnifiedShareSheetMessengerSection.react"),{LSresults:j,enableMultiSelection:!0,feedLocation:r,feedTracking:s,hasLightSpeedResults:t,initialScrollToIndex:u,initialSelectedIndex:b.initialSelectedIndex,messengerQueryReference:a.messengerQueryReference,onClose:b.onClose,shareableID:b.shareableID,shareableUrl:b.shareableUrl,storyData:y})})}),k.jsx(c("CometColumnItem.react"),{paddingHorizontal:16,paddingTop:0,children:k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx(c("UnifiedShareSheetSendMessageComposerPlaceholder.react"),{}),name:"UnifiedShareSheetMessengerMultiSelectionDialog.Composer",children:k.jsx(o,{editor:z,feedLocation:r,shareSheetComponentVariant:"unified_share_sheet",shareableID:x,sharingComponentName:"hscroll_multiselect_message_composer"})})}),k.jsx(c("CometColumnItem.react"),{paddingHorizontal:16,paddingTop:0,children:k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx(c("UnifiedShareSheetSendMessageButtonPlaceholder.react"),{}),name:"UnifiedShareSheetMessengerMultiSelectionDialog.SendMessageButton",children:k.jsx(p,{editor:z,feedLocation:r,feedTracking:s,onClose:w,sendButtonStatus:E,shareableID:b.shareableID,storyData:y,url:b.shareableUrl||"",viewerRef:e==null?void 0:e.viewer})})})]})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("UnifiedShareSheetSendMessageButton_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnifiedShareSheetSendMessageButton_viewer",selections:[{alias:null,args:null,kind:"ScalarField",name:"chat_tabs_turned_off",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("useMWSendAttachment",["$InternalEnum","CometMessengerShareGating","CometRelay","CometUnifiedShareSheetGating","FBLogger","JSResourceForInteraction","LSDatabaseSingleton","LSMessagingThreadAttributionType","MAWVerifyThreadCutoverDeferred","MWLSLogSend","MWVersion","MaybeUpdateTargetBasedOnODCutoverOrDefaultE2EEDeferred","asyncToGeneratorRuntime","cr:2898","cr:3536","gkx","isThreadLevelCutoverEnabled","qex","react","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=h||d("react");e.useCallback;var j=e.c,k=b("$InternalEnum").Mirrored(["USS_H_SCROLL","BCF"]);function l(){if(c("qex")._("77")===!0||c("qex")._("68")===!0)return!0;else return c("qex")._("121")===!0}var m=b("cr:2898")||b("cr:3536"),n=c("JSResourceForInteraction")("LSShareAttachment").__setRef("useMWSendAttachment");function a(){var a=j(4),e=d("CometRelay").useRelayEnvironment(),f;a[0]!==e?(f=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,f=a.attachment,g=a.lssTraceApi,h=a.reshareTarget,j=a.s2sInstanceKey,o=a.secureXmaMessageType,p=a.sharingComponent,q=a.source,r=a.thread;a=a.xmaDataProps;var s=l(),t=s||c("isThreadLevelCutoverEnabled")();d("sendToSentQPLLogger").markSendToSentPoint(j,"update_target_deferred_component_load_start");var u=(yield c("MaybeUpdateTargetBasedOnODCutoverOrDefaultE2EEDeferred").load());d("sendToSentQPLLogger").markSendToSentPoint(j,"update_target_deferred_component_load_end");d("sendToSentQPLLogger").markSendToSentPoint(j,"update_target_start");u=(yield u(h,(i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton,"sendAttachment"));d("sendToSentQPLLogger").markSendToSentPoint(j,"update_target_end");f=u.targetID!==f.targetID?babelHelpers["extends"]({},f,{targetID:u.targetID}):f;var v=function(a){d("MWLSLogSend").logSentHeroInteraction(g,a,{isMessageRequest:!1,mwVersion:d("MWVersion").v2,source:(a=q)!=null?a:c("LSMessagingThreadAttributionType").UNKNOWN,threadType:r==null?void 0:r.threadType});d("sendToSentQPLLogger").markSendToSentPoint(j,"offline_msg_id_generated");g.addMarkerPoint("offline_msg_id_generated","AppTiming")};b=(b=u.isTargetE2E)!=null?b:s;s=!1;d("sendToSentQPLLogger").markSendToSentPoint(j,"verify_thread_cutover_start");g.addMarkerPoint("verify_thread_cutover_start","AppTiming");if(c("MAWVerifyThreadCutoverDeferred")!=null){d("sendToSentQPLLogger").markSendToSentPoint(j,"verify_cutover_deferred_component_load_start");var w=(yield c("MAWVerifyThreadCutoverDeferred").load());w=w.verifyThreadCutoverWithStringInput;d("sendToSentQPLLogger").markSendToSentPoint(j,"verify_cutover_deferred_component_load_end");s=(yield w((i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton,u.targetID))}d("sendToSentQPLLogger").markSendToSentPoint(j,"verify_thread_cutover_end");if(t&&b||s){if(m===null){d("sendToSentQPLLogger").markSendToSentFail(j,"MAWShareAttachmentDeferred_null");g.addMarkerPoint("MAWShareAttachmentDeferred_null","AppTiming");throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to fetch MAWShareAttachmentDeferred")}d("sendToSentQPLLogger").markSendToSentPoint(j,"share_attachment_deferred_component_load_start");w=(yield m.load());t=w.shareSecureAttachment;d("sendToSentQPLLogger").markSendToSentPoint(j,"share_attachment_deferred_component_load_end");d("sendToSentQPLLogger").markSendToSentPoint(j,"share_secure_attachment_start");b=p===k.BCF&&d("CometMessengerShareGating").shouldEnableBCFSingleFetchXMA()||p===k.USS_H_SCROLL&&d("CometUnifiedShareSheetGating").shouldEnableUSSSingleFetchXMA();b?yield t(void 0,f,u,q,j,o,"useMWSendAttachment",v,g,a):yield t(e,f,u,q,j,o,"useMWSendAttachment",v,g,void 0);d("sendToSentQPLLogger").markSendToSentPoint(j,"share_secure_attachment_end");return u}else{s=(yield n.load());w=s.share;yield w(f,j);return h}});return function(b){return a.apply(this,arguments)}}(),a[0]=e,a[1]=f):f=a[1];f=f;var g=o;a[2]!==f?(g={preloadSendAttachment:g,sendAttachment:f},a[2]=f,a[3]=g):g=a[3];return g}function o(a){a?(m==null?void 0:m.preload(),c("gkx")("8490")&&(c("MAWVerifyThreadCutoverDeferred")==null?void 0:c("MAWVerifyThreadCutoverDeferred").preload(),c("MaybeUpdateTargetBasedOnODCutoverOrDefaultE2EEDeferred")==null?void 0:c("MaybeUpdateTargetBasedOnODCutoverOrDefaultE2EEDeferred").preload())):n.preload()}g.SharingComponentType=k;g.useMWSendAttachment=a}),98);
__d("useUnifiedShareSheetPopChat",["SharingConstants","react","useMWChatOpenTabForGroup","useMWChatOpenTabForPage","useMWChatOpenTabForUser"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.c;function a(){var a=i(4),b=c("useMWChatOpenTabForUser")(d("SharingConstants").MESSENGER_POPUP_ENTRYPOINT),e=b.openTabByThreadKey;b=c("useMWChatOpenTabForGroup")(d("SharingConstants").MESSENGER_POPUP_ENTRYPOINT);b[0];b[1];var f=b[2],g=c("useMWChatOpenTabForPage")(d("SharingConstants").MESSENGER_POPUP_ENTRYPOINT);a[0]!==e||a[1]!==f||a[2]!==g?(b=function(a){var b=a.isSecureShare;a=a.target;bb2:switch(a.targetType){case"USER":e(a.targetID,b);break bb2;case"GROUP":f(a.targetID,b);break bb2;case"PAGE":g(a.targetID);break bb2;default:}},a[0]=e,a[1]=f,a[2]=g,a[3]=b):b=a[3];return b}g["default"]=a}),98);
__d("UnifiedShareSheetSendMessageButton.react",["fbt","ix","CometLinkSharingContext","CometLinkSharingUtil","CometRelay","CometUnifiedShareSheetGating","FBLogger","FDSButton.react","I64","LSMessagingThreadAttributionType","LSSLogger","MAWFetchXMAData","MAWSecureComposerText","MAWThreadId","MWSharedMsgLogUtils","Promise","RelayHooks","SharingConstants","SilenceableErrorMessageUtils","UnifiedShareSheetConstants","UnifiedShareSheetMultiSelectionContext","UnifiedShareSheetSendMessageButton_viewer.graphql","asyncToGeneratorRuntime","cometPushToast","fbicon","isStringNullOrEmpty","isThreadLevelCutoverEnabled","promiseDone","qex","react","recoverableViolation","requireDeferred","sendToSentQPLLogger","unrecoverableViolation","useMWSendAttachment","useReStore","useUnifiedShareSheetLogger","useUnifiedShareSheetPopChat"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n,o=n||(n=d("react"));e=n;var p=e.useCallback,q=e.useContext,r=e.useMemo,s=c("requireDeferred")("ShareMetricsLoggingController").__setRef("UnifiedShareSheetSendMessageButton.react"),t=h._("__JHASH__TpCbmnXtLDI__JHASH__"),u=h._("__JHASH__c5lF0BE9eTk__JHASH__"),v=d("CometUnifiedShareSheetGating").shouldEnableUSSSingleFetchXMA();function w(){if(c("qex")._("77")===!0||c("qex")._("68")===!0)return!0;else return c("qex")._("121")===!0}function a(a){var e=a.editor,f=a.feedLocation,g=a.feedTracking,n=a.onClose,x=a.sendButtonStatus,y=a.shareableID,z=a.storyData,A=a.url;a=a.viewerRef;var B=w()||!1,C=B||c("isThreadLevelCutoverEnabled")(),D=q(c("CometLinkSharingContext")),E=D.getWrappedShareUrlID;D=q(c("UnifiedShareSheetMultiSelectionContext"));var F=D.selectedTargets;D=d("CometRelay").useFragment(j!==void 0?j:j=b("UnifiedShareSheetSendMessageButton_viewer.graphql"),a);a=D==null?void 0:D.actor;var G=a==null?void 0:a.id,H=r(function(){return{entry_point:f,feed_tracking:g?g.toString():"",sharing_component_name:"hscroll_multiselect_suggested_recipient"}},[f,g]),I=r(function(){var a;return{entry_point:f,feed_tracking:(a=g)!=null?a:[""],sharing_component_name:"hscroll_multiselect_suggested_recipient"}},[g,f]),J=c("useUnifiedShareSheetLogger")(),K=J.onSendMessageButtonInUSSAttempted,L=J.onSendMessageInMessengerSuccessful,M=J.onSendMessageInMessengerUSSFailed,N=J.onSendMessageInMessengerUSSSuccessful;if(G==null||a==null||y==null)throw c("unrecoverableViolation")("Need a viewer id, actor, story, and postID in order to share a story","fb_social_experience_web_sharing");var O=c("useUnifiedShareSheetPopChat")(),P=(D==null?void 0:D.chat_tabs_turned_off)===!0;J=d("useMWSendAttachment").useMWSendAttachment();var Q=J.preloadSendAttachment,R=J.sendAttachment;a=p(function(){Q(C)},[C,Q]);var S=(l||(l=c("useReStore")))();D=d("LSSLogger").useLSSLogger();var T=D.traceLocalSendMessageAsync,U=d("RelayHooks").useRelayEnvironment(),V=p(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,g,h,i){a={isTargetE2E:a.isTargetE2E,targetID:a.targetID,targetType:a.targetType,typeName:a.typeName};var j="user",k="one_to_one";switch(a.targetType){case"USER":j="user";k="one_to_one";break;case"GROUP":j="group";k="group";break;case"PAGE":j="page";k="one_to_one";break;default:j="user"}var l=E(z==null?void 0:z.id);l={actorID:G,entryPoint:d("SharingConstants").MESSENGER_POPUP_ENTRYPOINT,message:b,messagingInformTreatmentInfo:z==null?void 0:z.messagingInformTreatmentInfo,shareID:(l=l)!=null?l:y,targetID:a.targetID,targetType:j,url:A};var n=(j=i)!=null?j:d("sendToSentQPLLogger").markSendToSentStart(),o=(i=h)!=null?i:yield T();try{j=(yield d("MAWThreadId").getThreadFromJid(S.tables,(m||(m=d("I64"))).of_string(a.targetID)));h=j!=null?c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE:c("LSMessagingThreadAttributionType").UNKNOWN;if(j!=null){i=d("MWSharedMsgLogUtils").getMessageTypeParams({messageText:b,sentFromShareSheet:!0,threadType:j.threadType});c("promiseDone")(d("MWSharedMsgLogUtils").getSendToSentAnnotations(j,i,h),function(a){a.string=babelHelpers["extends"]({},a.string,{attachment_type:"share",message_type:"share",root_component:"UnifiedShareSheetSendMessageButton",surface:f}),a["int"]={number_targets:e},d("sendToSentQPLLogger").addSendToSentAnnotations(n,a),o.addAnnotationInt("number_targets",e),o.addAnnotation("surface",f||"unknown")});d("MWSharedMsgLogUtils").addSendMessageMetadataForInteractionTrace(o,i,j,"UnifiedShareSheetSendMessageButton")}d("sendToSentQPLLogger").markSendToSentPoint(n,"start_post_sharing");i=(yield R({attachment:l,lssTraceApi:o,reshareTarget:a,s2sInstanceKey:n,sharingComponent:d("useMWSendAttachment").SharingComponentType.USS_H_SCROLL,source:h,thread:j,xmaDataProps:g}));s.onReady(function(a){a.logShareFunnelEvent({fb_entry_point:"send_in_message",fb_feed_location:f,fb_share_type:"share_created",shareable_id:null})});K(babelHelpers["extends"]({},H,{is_link_sharing_url_used:d("CometLinkSharingUtil").isLinkSharingUrlUsed(A),is_text_attached:!c("isStringNullOrEmpty")(b),receiver_type:k}));d("sendToSentQPLLogger").markSendToSentSuccess(n);N(babelHelpers["extends"]({},H));L(babelHelpers["extends"]({},I,{receiver_count:F.size.toString()}));if(!P){O({isSecureShare:(l=i.isTargetE2E)!=null?l:B,target:i})}}catch(a){d("sendToSentQPLLogger").markSendToSentFail(n,"unknown_xma_error",a);o.failTrace(a,!0);throw a}});return function(b,c,d,e,f,g){return a.apply(this,arguments)}}(),[E,z==null?void 0:z.id,z==null?void 0:z.messagingInformTreatmentInfo,G,y,A,T,S.tables,R,K,H,N,L,I,F.size,P,f,O,B]),W=p(function(a){s.onReady(function(a){a.logShareFunnelEvent({fb_entry_point:"send_in_message",fb_feed_location:f,fb_share_type:"share_failure",shareable_id:null})});M(babelHelpers["extends"]({},H));a=d("SilenceableErrorMessageUtils").getMetadataFromError(a.error);if(d("SilenceableErrorMessageUtils").shouldHideErrorMessage(a))return;d("cometPushToast").cometPushErrorToast({message:h._("__JHASH__WcIF2-D1xlx__JHASH__")})},[f,H,M]),X=p(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a=e.getEditorState(),f=d("MAWSecureComposerText").getTextFromEditorState(a);n();var g={linkType:"unknown"},h=new Map();if(v){a=Array.from(F.values()).map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("sendToSentQPLLogger").markSendToSentStart(),c=(yield T());a!=null&&h.set(a,{lssTraceApi:c,s2sInstanceKey:b});return h});return function(b){return a.apply(this,arguments)}}());yield (k||(k=b("Promise"))).all(a);A==null&&(h.forEach(function(a){a.lssTraceApi.failTrace("null_xma_url",!0),d("sendToSentQPLLogger").markSendToSentFail(a.s2sInstanceKey,"null_xma_url")}),c("FBLogger")("messenger_web_sharing").mustfix("[MAWShareAttachment] Attachment URL is null"));var i=[];h.forEach(function(a){a.lssTraceApi.addMarkerPoint("xma_data_query_start","AppTiming"),d("sendToSentQPLLogger").markSendToSentPoint(a.s2sInstanceKey,"xma_data_query_start"),i.push(a.s2sInstanceKey)});g=(yield d("MAWFetchXMAData").fetchXMAData(U,A,i));h.forEach(function(a){a.lssTraceApi.addMarkerPoint("xma_data_query_end","AppTiming"),d("sendToSentQPLLogger").markSendToSentPoint(a.s2sInstanceKey,"xma_data_query_end")})}if(v){a=Array.from(F.values()).map(function(a){var b;return a!=null&&V(a,f,F.size,g,(b=h.get(a))==null?void 0:b.lssTraceApi,(b=h.get(a))==null?void 0:b.s2sInstanceKey)});yield (k||(k=b("Promise"))).all(a)}else F.forEach(function(a){a!=null&&c("promiseDone")(V(a,f,F.size,void 0,void 0,void 0))})}catch(a){W(a);c("recoverableViolation")("error on sending message in unified share sheet. "+a.message,"fb_social_experience_web_sharing");return}}),[e,W,n,F,V,U,T,A]);J=x===d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.SEND_SEPARATELY?u:t;return o.jsx(c("FDSButton.react"),{disabled:x===d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.DISABLED,icon:d("fbicon")._(i("505616"),16),label:J,onHoverIn:a,onPress:function(){return c("promiseDone")(X())}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);