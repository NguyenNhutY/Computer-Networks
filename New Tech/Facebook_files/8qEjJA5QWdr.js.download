;/*FB_PKG_DELIM*/

__d("CometTokenizerInputStrategy.react",["BaseTextInput_DEPRECATED.react","CometTokenizerInputWidthResolver.react","cometTypeaheadInputWebkitStyles","react","stylex","useCometTypeaheadInputStrategyOnChangeHandler"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useId,l={disabled:{cursor:"x1h6gzvc",$$css:!0},input:{backgroundColor:"xjbqb8w",borderTop:"x76ihet",borderEnd:"xwmqs3e",borderBottom:"x112ta8",borderStart:"xxxdfa6",boxSizing:"x9f619",color:"xzsf02u",display:"xt0psk2",fontSize:"x1jchvi3",fontWeight:"x1fcty0u",lineHeight:"x132q4wb",marginTop:"x1xmf6yo",marginEnd:"x1emribx",marginBottom:"x1e56ztr",marginStart:"x1i64zmx",maxWidth:"x193iq5w",outline:"x1a2a7pz",resize:"xtt52l0",$$css:!0},root:{cursor:"x1ed109x",maxWidth:"x193iq5w",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}};b=j.forwardRef(a);function a(a,b){var d=a.ariaProps;a.description;a.errorMessage;var e=a.id,f=a.inputEndContent,g=a.inputStartContent,i=a.inputExtraProps;i=i===void 0?{}:i;var m=i.xstyle,n=a.isDisabled;a.label;i=a.onChange;var o=a.placeholder,p=a.queryString,q=a.testid,r=a.autoFocus,s=babelHelpers.objectWithoutPropertiesLoose(a,["ariaProps","description","errorMessage","id","inputEndContent","inputStartContent","inputExtraProps","isDisabled","label","onChange","placeholder","queryString","testid","autoFocus"]),t=(q=e)!=null?q:k(),u=c("useCometTypeaheadInputStrategyOnChangeHandler")({onChange:i});return j.jsxs("div",{className:(h||(h=c("stylex")))(l.root,n===!0&&l.disabled),children:[g,j.jsx(c("CometTokenizerInputWidthResolver.react"),{placeholder:o,queryString:p,children:function(a){var e;return j.jsx(c("BaseTextInput_DEPRECATED.react"),babelHelpers["extends"]({},d,s,{autoComplete:"off",autoFocus_PLEASE_USE_FOCUS_REGION_INSTEAD:r,className:(h||(h=c("stylex")))(l.input,m,c("cometTypeaheadInputWebkitStyles")["default"]),"data-testid":void 0,disabled:n,id:t,onChange:u,placeholder:(e=o)!=null?e:"",ref:b,spellCheck:!1,style:{width:a},type:"search",value:p}))}}),f]})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("MAWSecureThreadToggleWithNuxReqCondWrapper.react",["FDSSwitch.react","nux:34","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k=(e=b("nux:34")==null?void 0:b("nux:34")("armadillo_web_compose_message_nux"))!=null?e:c("FDSSwitch.react");function a(a){var b=i(2),c;b[0]!==a?(c=j.jsx(k,babelHelpers["extends"]({},a)),b[0]=a,b[1]=c):c=b[1];return c}g["default"]=a}),98);
__d("MAWSecureThreadToggle.react",["fbt","BaseTheme.react","MAWSecureThreadToggleWithNuxReqCondWrapper.react","MWXText.react","gkx","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(j||(j=d("react"))).c,l=j;b={"switch-active":"var(--always-black)"};e={"switch-active":"var(--always-black)"};var m={dark:e,light:b,type:"VARIABLES"},n={secureToggle:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"x13a6bvl",$$css:!0},stretch:{justifyContent:"x1qughib",$$css:!0}};function o(a){return c("gkx")("26370")?l.jsx(c("BaseTheme.react"),{config:m,children:a}):a}o.displayName=o.name+" [from "+f.id+"]";function a(a){var b=k(18),d=a.areWeCreatingASecureThread,e=a.disabled,f=a.setAreWeCreatingASecureThread;a=a.stretch;e=e===void 0?!1:e;a=a===void 0?!1:a;var g;b[0]!==d?(g=d?h._("__JHASH__UkYvuJrDAYE__JHASH__"):h._("__JHASH__xgvNQuz6ooM__JHASH__"),b[0]=d,b[1]=g):g=b[1];g=g;a=a?n.stretch:!1;var j;b[2]!==a?(j=(i||(i=c("stylex")))(n.secureToggle,a),b[2]=a,b[3]=j):j=b[3];b[4]===Symbol["for"]("react.memo_cache_sentinel")?(a="x1emribx",b[4]=a):a=b[4];b[5]!==g?(a=l.jsx("span",{"aria-hidden":!0,className:a,children:l.jsx(c("MWXText.react"),{type:"body3",children:g})}),b[5]=g,b[6]=a):a=b[6];var m;b[7]!==f?(m=function(){return f(function(a){return!a})},b[7]=f,b[8]=m):m=b[8];var p;b[9]!==g||b[10]!==e||b[11]!==m||b[12]!==d?(p=o(l.jsx(c("MAWSecureThreadToggleWithNuxReqCondWrapper.react"),{"aria-label":g,disabled:e,onClick:m,size:"small",testid:void 0,value:d})),b[9]=g,b[10]=e,b[11]=m,b[12]=d,b[13]=p):p=b[13];b[14]!==j||b[15]!==a||b[16]!==p?(g=l.jsxs("label",{className:j,children:[a,p]}),b[14]=j,b[15]=a,b[16]=p,b[17]=g):g=b[17];return g}g["default"]=a}),226);
__d("MWChatSearchTypeaheadLightspeedDataSourceSecureSearch",["FBLogger","Promise","cr:3752","createMWChatSearchTypeaheadDataEntry"],(function(a,b,c,d,e,f,g){"use strict";var h,i=10;function a(a,d,e,f){if(b("cr:3752")==null)return(h||(h=b("Promise"))).resolve([]);return d.length>0&&!d.includes("secure")?(h||(h=b("Promise"))).resolve([]):b("cr:3752").fetchResults(a,e,!0,f).then(function(a){a=a.map(c("createMWChatSearchTypeaheadDataEntry")).filter(function(a){return a.rawData.isE2EE});return i<=0?a:a.slice(0,i)})["catch"](function(a){c("FBLogger")("messenger_search").catching(a).mustfix("Error performing MWChatSearchIssueMAWFTSQuery.fetchResults");return[]})}g.secureSearch=a}),98);
__d("mwChatSearchPayloadDecoratorRemoveDuplicates",["MWChatSearchResultType","MWXacGating"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b=!1);return function(e){var f=e.entries;e=babelHelpers.objectWithoutPropertiesLoose(e,["entries"]);var g=a.some(function(a){a=a.rawData;return a.resultType===c("MWChatSearchResultType").USER}),h=a.some(function(a){a=a.rawData;return!a.isInstagramAccount}),i=new Set(),j=new Set();a.forEach(function(a){return j.add(a.key)});b&&a.forEach(function(a){a.rawData.otherUserId!=null&&j.add(a.rawData.otherUserId)});f=f.filter(function(a){var e=a.key;a=a.rawData;if(g&&a.resultType!==c("MWChatSearchResultType").USER)return!1;if(!d("MWXacGating").isGroupsEnabled()&&(h&&Boolean(a.isInstagramAccount)))return!1;a=!i.has(e)&&!j.has(e)&&!(b&&a.otherUserId!=null&&j.has(a.otherUserId));i.add(e);return a});return babelHelpers["extends"]({entries:f},e)}}g["default"]=a}),98);
__d("MWChatSearchTypeaheadLightspeedDataSource",["LSIntEnum","LSSearchType","MNetRankType","MWChatSearchFilteringUtils","MWChatSearchIssueLightspeedQuery","MWChatSearchResultType","MWChatSearchSurfaces","MWChatSearchTypeaheadLightspeedDataSourceSecureSearch","MWLSSearchIssueSearchQuerySupportedTypes","MWPSearchOfflineOpenConversationsUtils","Promise","asyncToGeneratorRuntime","createMWChatSearchTypeaheadDataEntry","gkx","isArmadillo","isTlcSearchEnabled","mwChatSearchPayloadDecoratorRemoveDuplicates","mwChatSearchPayloadDecoratorRemoveExcluded","mwChatSearchPayloadEnumerate"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("gkx")("26357"),k=c("isArmadillo")()&&c("isTlcSearchEnabled")(),l=10,m=[(i||(i=d("LSIntEnum"))).ofNumber(c("LSSearchType").CONTACT)];function n(a,e,f){if(!j&&e===c("MWChatSearchSurfaces").broadcast)return(h||(h=b("Promise"))).resolve([]);return a.length>0&&!a.includes("offline")?(h||(h=b("Promise"))).resolve([]):d("MWPSearchOfflineOpenConversationsUtils").search(f.query,!0).then(function(a){a=a.map(c("createMWChatSearchTypeaheadDataEntry"));return l<=0?a:a.slice(0,l)})}function o(a,c,e,f){a=d("MWChatSearchTypeaheadLightspeedDataSourceSecureSearch").secureSearch(a,c,e,f);c=n(c,e,f);return(h||(h=b("Promise"))).all([a,c])}a=function(){function a(a){var b=a.excludedIDs;b=b===void 0?[]:b;var e=a.lightspeedSupportedTypes;e=e===void 0?d("MWLSSearchIssueSearchQuerySupportedTypes").allSupportedTypes:e;var f=a.source;f=f===void 0?c("MWChatSearchSurfaces").universal:f;var g=a.includeGroupSearch;g=g===void 0?!1:g;var h=a.excludeNonSecureThreadSearch;h=h===void 0?!1:h;var j=a.nullStateRankType;j=j===void 0?(i||(i=d("LSIntEnum"))).ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE):j;var k=a.subDataSources;k=k===void 0?[]:k;a=a.database;this.$1=[];this.$2=[];this.$5=!1;this.$6=!1;this.$10=!1;this.$2=b;this.$3=e;this.$4=f;this.$5=g;this.$6=h;this.$7=j;this.$8=k;this.$9=a;this.$10=e.includes((i||(i=d("LSIntEnum"))).ofNumber(c("LSSearchType").INTEGRATED_MESSAGE_SEARCH_THREAD))}var e=a.prototype;e.fetchNetwork=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=this,f=c("mwChatSearchPayloadDecoratorRemoveDuplicates")(this.$1),g=c("mwChatSearchPayloadDecoratorRemoveExcluded")(this.$2);if(a.query.length===0)return d("MWChatSearchIssueLightspeedQuery").fetchRecommendations(this.$3,this.$4,a,this.$7).then(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(f){f=f.map(c("createMWChatSearchTypeaheadDataEntry"));f=(yield d("MWChatSearchFilteringUtils").filterSearchResults(e.$4,f,e.$9,e.$6,k));return(h||(h=b("Promise"))).resolve({entries:f,params:a})});return function(a){return f.apply(this,arguments)}}());var i=[];this.$10&&!this.$6&&i.push({key:a.query,label:'Search messages for "'+a.query+'"',rawData:{displayName:'Search messages for "'+a.query+'"',id:a.query,imageUrl:"",isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:!1,isEPD:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,resultType:c("MWChatSearchResultType").MESSAGE,secondaryImageUrl:"",subtext:""},type:"entry"});var l=(yield o(this.$3,this.$8,this.$4,a)),n=l[0],p=l[1];l=this.$6?m:this.$3;return d("MWChatSearchIssueLightspeedQuery").fetchResults(l,this.$8,this.$4,this.$5,a).then(function(){var h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b.map(c("createMWChatSearchTypeaheadDataEntry"));b=i.concat(p,n,b);b=j?d("MWChatSearchFilteringUtils").dedupeByThreadKey(b):b;b=(yield d("MWChatSearchFilteringUtils").filterSearchResults(e.$4,b,e.$9,e.$6,k));return j?c("mwChatSearchPayloadEnumerate")(g({entries:b,params:a})):c("mwChatSearchPayloadEnumerate")(g(f({entries:b,params:a})))});return function(a){return h.apply(this,arguments)}}())});function e(b){return a.apply(this,arguments)}return e}();return a}();g["default"]=a}),98);
__d("MWChatTokenizerTokenStrategy.react",["CometTokenizerTokenStrategy.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(2),d;b[0]!==a?(d=j.jsx("div",{"data-testid":void 0,children:j.jsx(c("CometTokenizerTokenStrategy.react"),babelHelpers["extends"]({},a,{level:4}))}),b[0]=a,b[1]=d):d=b[1];return d}g["default"]=a}),98);
__d("useMWLightSpeedChatSearchSuggestedContacts",["MWChatSearchFetchContactRecommendations","createMWChatSearchTypeaheadDataEntry","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useMemo;var i=b.c,j=void 0;function a(){var a=i(3),b=d("MWChatSearchFetchContactRecommendations").useChatSearchContactRecommendations(j);if(a[0]!==b){var e;a[2]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(a,b){a=a[0];return c("createMWChatSearchTypeaheadDataEntry")(a,b)},a[2]=e):e=a[2];e=b.map(e);a[0]=b;a[1]=e}else e=a[1];b=e;return b}g["default"]=a}),98);
__d("MWJewelSearchTypeahead.react",["fbt","BaseTypeahead.react","CometRelay","CometTypeaheadBackButton.react","CometTypeaheadInputRoundedStrategy.react","CometTypeaheadLayoutContextualStrategy.react","MWChatSearchSurfaces","MWChatSearchTypeaheadLightspeedDataSource","MWFacebookUserWithoutMessengerAccess","MWLSSearchIssueSearchQuerySupportedTypes","MWLSThreadDisplayContext","MWPSearchSystem","MWSearchLogging","cr:2012305","createMWJewelSearchTypeaheadViewStrategy.react","gkx","isArmadillo","promiseDone","react","useMWLightSpeedChatSearchSuggestedContacts","useReStore","uuidv4","xplatToDOMRef"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));e=j;var l=e.useCallback,m=e.useEffect,n=e.useMemo,o=e.useRef,p=e.useState,q={searchInput:{marginTop:"x1xmf6yo",marginEnd:"x11i5rnm",marginBottom:"x1e56ztr",marginStart:"x1mh8g0r",paddingTop:"xexx8yu",paddingEnd:"x1pi30zi",paddingBottom:"x18d9i69",paddingStart:"x1swvt13",$$css:!0},searchView:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxShadow:"x1gnnqk1",display:"x78zum5",minHeight:"xphu8jj",$$css:!0}},r=c("createMWJewelSearchTypeaheadViewStrategy.react")(),s=c("gkx")("24086");function a(a){var e=a.onChange,f=a.onFocus,g=a.onPressEntry,j=a.onSelectFreeformQuery,t=babelHelpers.objectWithoutPropertiesLoose(a,["onChange","onFocus","onPressEntry","onSelectFreeformQuery"]);a=p(null);var u=a[0],v=a[1],w=d("CometRelay").useRelayEnvironment(),x=o(null),y=(i||(i=c("useReStore")))(),z=o(!1);m(function(){var a=x.current;b("cr:2012305")!==null&&a!=null&&b("cr:2012305").trackTypingPerf(a,"MWJewelSearchTypeahead");return function(){b("cr:2012305")!==null&&a!=null&&b("cr:2012305").unregisterTypingPerf(a)}},[x]);var A=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();a=n(function(){return new(c("MWChatSearchTypeaheadLightspeedDataSource"))({excludedIDs:[],includeGroupSearch:A!=="ChatTab",includeRecommendations:!0,lightspeedSupportedTypes:d("MWLSSearchIssueSearchQuerySupportedTypes").allSupportedTypesWithMessageSearch,limit:20,relayEnvironment:w,source:c("MWChatSearchSurfaces").universal})},[w,A]);var B=l(function(){v(null),e("")},[e]),C=l(function(a){var b=function(){g!=null&&g(a)};if(u==null){b();return}d("MWSearchLogging").logResultSelected(u,t.queryString,a,z);b()},[g,u,t.queryString]),D=l(function(){s&&c("promiseDone")(d("MWPSearchSystem").clearAll(y));var a=c("uuidv4")();v(a);z.current=!1},[y]),E=c("useMWLightSpeedChatSearchSuggestedContacts")(),F=d("MWFacebookUserWithoutMessengerAccess").useIsFacebookUserWithoutMessengerAccess(),G=h._("__JHASH__ktsKn3dbNLm__JHASH__"),H=h._("__JHASH__wCWGz0nEOur__JHASH__");F=F?H:G;return k.jsx(c("BaseTypeahead.react"),{dataSource:a,dataSourceFetchConfigParams:c("isArmadillo")()?{requestFlow:"network-upon-approve"}:{},emptyEntries_DO_NOT_USE:E,inputExtraProps:{hideIconAnimation:!0,hideIconOnFocus:!0},inputRef:d("xplatToDOMRef").xplatToInputRef(x),inputStartContent:u!=null?k.jsx(c("CometTypeaheadBackButton.react"),{testid:void 0}):null,inputStrategyRenderer:c("CometTypeaheadInputRoundedStrategy.react"),layoutStrategyRenderer:c("CometTypeaheadLayoutContextualStrategy.react"),loggingContext:"messenger_jewel",onChange:e,onClose:B,onFocus:f,onOpen:D,onPressEntry:C,onSelectFreeformQuery:j,placeholder:F,queryString:t.queryString,shouldQueryStringUpdateFromSelectedEntryOnClick:!1,viewStrategyRenderer:r,xstyles:{inputXStyle:q.searchInput,viewXStyle_DO_NOT_USE:q.searchView}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("withBaseTokenizerEscapeDecorator",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback;function a(a,b){var c=b.onSearchAbandon;function d(b){var d=b.onChange,e=b.onEscape,f=b.queryString,g=b.selectedEntries;b=babelHelpers.objectWithoutPropertiesLoose(b,["onChange","onEscape","queryString","selectedEntries"]);var h=j(function(){f!==""?d(""):g.length===0&&(c&&c()),e&&e()},[f,g.length,e,d]);return i.jsx(a,babelHelpers["extends"]({},b,{onChange:d,onEscape:h,queryString:f,selectedEntries:g}))}d.displayName=d.name+" [from "+f.id+"]";return d}g["default"]=a}),98);
__d("withMWChatSearchTokenManagementDecorator",["MWChatSearchResultType","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.c;function a(a){function b(b){var d=j(24),e,f,g,h,k,l;d[0]!==b?(e=b.onChangeEntries,f=b.onPressEntry,h=b.onRemoveEntry,k=b.onSearchCompletion,g=b.selectedEntries,l=babelHelpers.objectWithoutPropertiesLoose(b,["onChangeEntries","onPressEntry","onRemoveEntry","onSearchCompletion","selectedEntries"]),d[0]=b,d[1]=e,d[2]=f,d[3]=g,d[4]=h,d[5]=k,d[6]=l):(e=d[1],f=d[2],g=d[3],h=d[4],k=d[5],l=d[6]);d[7]!==g||d[8]!==e||d[9]!==f?(b=function(a){var b=a.rawData.resultType;if(b===c("MWChatSearchResultType").USER){b=[].concat(g,[a]);e(b)}f&&f(a)},d[7]=g,d[8]=e,d[9]=f,d[10]=b):b=d[10];b=b;var m;d[11]!==g||d[12]!==e||d[13]!==h?(m=function(a){var b;b=((b=g)!=null?b:[]).filter(function(b){return b.key!==a.key});e(b);h&&h(a)},d[11]=g,d[12]=e,d[13]=h,d[14]=m):m=d[14];m=m;var n;d[15]!==k?(n=function(){k&&k()},d[15]=k,d[16]=n):n=d[16];n=n;var o;d[17]!==l||d[18]!==e||d[19]!==b||d[20]!==m||d[21]!==n||d[22]!==g?(o=i.jsx(a,babelHelpers["extends"]({},l,{onChangeEntries:e,onPressEntry:b,onRemoveEntry:m,onSearchCompletion:n,selectedEntries:g})),d[17]=l,d[18]=e,d[19]=b,d[20]=m,d[21]=n,d[22]=g,d[23]=o):o=d[23];return o}return b}g["default"]=a}),98);